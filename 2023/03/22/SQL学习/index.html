<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>SQL学习 - Jay的个人博客</title>
    <meta charset="UTF-8">
    <meta name="description" content="记录分享学习">
    <meta name="keywords" content="记录,学习,分享">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    

    <link rel="shortcut icon" href="/assets/logoko.png" type="image/png" />
    <meta name="description" content="定义SQL是用于访问和处理数据库的标准计算机语言：  SQL指结构化查询语言 SQL使我们有能力访问数据库 SQL是一种ANSI的标准计算机语言  RDBMS指的是关系型数据库管理系统  RDBMS中的数据存储在被称为表(tables)的数据库对象中 表是相关数据项的集合，它由行列组成  分类数据库操作语言DML和数据库定义语言DDLSQL(结构化查询语言)适用于执行查询的语法，但SQL语言也包含">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL学习">
<meta property="og:url" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Jay的个人博客">
<meta property="og:description" content="定义SQL是用于访问和处理数据库的标准计算机语言：  SQL指结构化查询语言 SQL使我们有能力访问数据库 SQL是一种ANSI的标准计算机语言  RDBMS指的是关系型数据库管理系统  RDBMS中的数据存储在被称为表(tables)的数据库对象中 表是相关数据项的集合，它由行列组成  分类数据库操作语言DML和数据库定义语言DDLSQL(结构化查询语言)适用于执行查询的语法，但SQL语言也包含">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-16-58.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-45-06.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-18-57.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-07-15.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-49-20.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-14-40-56.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-14-48-03.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-14-52-10.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-17-29.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-21-28.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-17-10.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-44-05.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-44-54.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-07-09.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-08-47.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-28-04.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-32-06.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-37-07.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-43-31.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-51-34.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-20-53-52.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-21-10-23.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-20-34-55.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-21-37-27.png">
<meta property="og:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-21-18-38.png">
<meta property="article:published_time" content="2023-03-22T02:39:16.000Z">
<meta property="article:modified_time" content="2023-03-22T13:38:18.757Z">
<meta property="article:author" content="Jay jay">
<meta property="article:tag" content="学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-16-58.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/highlight.js@9.15.8/styles/atom-one-dark.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css,gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/hexo-theme-nexmoe@latest/source/lib/mdui_043tiny/css/mdui.css,npm/hexo-theme-nexmoe@latest/source/lib/iconfont/iconfont.css?v=233" crossorigin>
    <link rel="stylesheet" href="/css/style.css?v=1679977717712">
    
    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1679977717712">
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="mdui-drawer-body-left">
    
    <div id="nexmoe-background">
        <div class="nexmoe-bg" style="background-image: url(/assets/background.gif)"></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="Jay jay" class="mdui-btn mdui-btn-icon"><img src="/assets/avatar.jpg" alt="Jay jay"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Jay jay">
            <img src="/assets/avatar.jpg" alt="Jay jay" alt="Jay jay">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>20</div>
        <div><span>标签</span>2</div>
        <div><span>分类</span>0</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://www.baidu.com/s?wd=" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
            </form>
         
    </div>
</div>
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/436182677" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/yyj-xx/yyj-xx.github.io" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
    
    
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 20px;">学习</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E5%86%99%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">学习写博客</a>
    </div>
    
  </div>

    
    

    
</aside>
    <div class="nexmoe-copyright">
        &copy; 2023 Jay jay
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <br>人生需要不断的探索
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
            <div class="nexmoe-post">

  <article>
      
          <div class="nexmoe-post-cover" style="padding-bottom: 66.66666666666666%;"> 
              <img data-src="/assets/background.gif" data-sizes="auto" alt="SQL学习" class="lazyload">
              <h1>SQL学习</h1>
          </div>
      
      
      <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2023年03月22日</a>
    <a><i class="nexmoefont icon-areachart"></i>5k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 22 分钟</a>
</div>

      

      <h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>SQL是用于访问和处理数据库的标准计算机语言：</p>
<ul>
<li>SQL指结构化查询语言</li>
<li>SQL使我们有能力访问数据库</li>
<li>SQL是一种ANSI的标准计算机语言</li>
</ul>
<p>RDBMS指的是关系型数据库管理系统</p>
<ul>
<li>RDBMS中的数据存储在被称为表(tables)的数据库对象中</li>
<li>表是相关数据项的集合，它由行列组成</li>
</ul>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p>数据库操作语言DML和数据库定义语言DDL<br>SQL(结构化查询语言)适用于执行查询的语法，但SQL语言也包含用于更新、插入和删除记录的语法。</p>
<p><strong>数据库操作语言DML</strong><br>查询和更新指令构成了SQL的DML部分：<em>更多的是操作表里的数据</em></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">-</span> 从数据库表中获取数据<br>update <span class="hljs-operator">-</span> 更新数据库表中的数据<br><span class="hljs-keyword">delete</span> <span class="hljs-operator">-</span> 从数据库表中删除数据<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-operator">-</span>向数据库表中插入数据<br></code></pre></td></tr></table></figure>

<p><strong>数据库定义语言DDL</strong><br>SQL的数据定义语言DDL部分使我们有能力创建或者删除表格:<em>更多的是操作数据库及表</em><br>数据库中最重要的DDL语句：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database <span class="hljs-operator">-</span> 创建新数据库<br><span class="hljs-keyword">alter</span> database <span class="hljs-operator">-</span> 修改数据库<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">-</span> 创建新表<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">-</span> 变更或改变数据库表名<br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">-</span> 删除表<br><span class="hljs-keyword">create</span> index <span class="hljs-operator">-</span> 创建索引(搜索键)<br><span class="hljs-keyword">drop</span> index <span class="hljs-operator">-</span> 删除索引<br></code></pre></td></tr></table></figure>

<h2 id="数据库的语句"><a href="#数据库的语句" class="headerlink" title="数据库的语句"></a>数据库的语句</h2><p><strong>select 和 select * 语句</strong><br>select语句用于从表中选取数据，结果被存储在一个结果表中（称结果集）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"># 语法<br><span class="hljs-keyword">select</span> 列名称 <span class="hljs-keyword">from</span> 表名称<br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> 表名称<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-16-58.png" alt="查询语句" class="lazyload"></p>
<p><strong>select distinct语句</strong><br>在表中可能包含重复值，该语句用于列出不同的distinct的值<br>distinct用于返回<strong>唯一不同</strong>的值</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> 列名称 <span class="hljs-keyword">from</span> 表名称<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-45-06.png" alt="distinct语句" class="lazyload"></p>
<p><strong>where子句</strong><br>如需有条件查询表中的数据，可以将where子句添加到select语句中</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 列名称 <span class="hljs-keyword">from</span> 表名称 <span class="hljs-keyword">where</span> 列 运算符 值<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-18-57.png" alt="where条件" class="lazyload"><br>运算符有：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-07-15.png" alt="where运算符" class="lazyload"><br>在某些版本的sql中&lt;&gt;可以写为!=</p>
<p><strong>and 和 or 运算符</strong><br>and 和 or 运算符用于基于一个以上的条件对记录进行过滤<br>and 和 or 可在where子语句中把两个或多个条件结合起来<br>如果第一个和第二个条件都成了，则and运算符显示一条记录<br>如果第一个和第二个条件中只要有一个成立，则or运算符显示一条记录</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-12-49-20.png" alt="and和or" class="lazyload"></p>
<p><strong>oder by语句</strong><br>order by语句用于根据指定的列对结果集进行排序<br>order by语句默认按照升序对记录进行排序<br>如果希望按照降序排列需要使用desc关键字,升序的关键字是asc</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">#以字母顺序显示名称<br><span class="hljs-keyword">select</span> username,level <span class="hljs-keyword">from</span> users <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> username<br>#以字母顺序显示名字，并以级别显示顺序<br><span class="hljs-keyword">select</span> username,level <span class="hljs-keyword">from</span> users <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> level<br>#以字母顺序显示名字，并以级别逆序排列<br><span class="hljs-keyword">select</span> username，level <span class="hljs-keyword">from</span> users <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> level <span class="hljs-keyword">desc</span><br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-14-40-56.png" alt="order by语句" class="lazyload"></p>
<p><strong>insert into语句</strong><br>insert into语句用于向表格中插入新的行</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> 表名称 <span class="hljs-keyword">values</span> (值<span class="hljs-number">1</span>，值<span class="hljs-number">2</span>，...)<br>也可以指定索要插入的数据的列<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> 表名称 (列<span class="hljs-number">1</span>，列<span class="hljs-number">2</span>，...) <span class="hljs-keyword">values</span> (值<span class="hljs-number">1</span>,值<span class="hljs-number">2</span>,...)<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-14-48-03.png" alt="插入信息" class="lazyload"></p>
<p><strong>update语句</strong><br>update语句用于修改表中的数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">update 表名称 <span class="hljs-keyword">set</span> 列名称 <span class="hljs-operator">=</span> 新 值 <span class="hljs-keyword">where</span> 列名称 <span class="hljs-operator">=</span> 某 值<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-14-52-10.png" alt="修改更新数据" class="lazyload"></p>
<p><strong>delete语句</strong><br>delete语句用于删除表中的行：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> 表名称 <span class="hljs-keyword">where</span> 列名称 <span class="hljs-operator">=</span> 值<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-17-29.png" alt="删除一行" class="lazyload"></p>
<p>可以在不删除表的情况下删除所有行，这意味着表的结构，属性和索引都是完整的</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> 表名称<br>或<br><span class="hljs-keyword">delete</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> 表名称<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-21-28.png" alt="清空表" class="lazyload"></p>
<p><strong>create语句</strong><br>create语句用来创建数据库和库中的表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">#创建表<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> 表名(<br>    属性名<span class="hljs-number">1</span> 类型 <span class="hljs-keyword">primary</span> key <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,   <span class="hljs-comment">--primary是主键 not null 是不为空</span><br>    属性名<span class="hljs-number">2</span> 类型 <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;值&#x27;</span>,  <span class="hljs-comment">---default用来指定默认值</span><br>    属性名<span class="hljs-number">3</span> 类型    <span class="hljs-comment">--注意最后一条语句不需要加,号</span><br>)<br><br>#创建数据库<br><span class="hljs-keyword">create</span> database 数据库名称    <span class="hljs-comment">--创建数据库</span><br><span class="hljs-keyword">on</span> <span class="hljs-keyword">primary</span><br>(<br> name        <span class="hljs-comment">--数据库的逻辑名称</span><br> filename    <br> <span class="hljs-comment">--物理存放位置及物理文件名称(Student_info.mdf就是在磁盘上显示的名称)</span><br> size        <span class="hljs-comment">--设置数据文件初始大小</span><br> maxsize        <span class="hljs-comment">--设置最大限制</span><br> filegrowth       <span class="hljs-comment">--设置主数据文件增长幅度</span><br>)<br>log <span class="hljs-keyword">on</span>         <span class="hljs-comment">--定义事务日志文件</span><br>(<br> name         <span class="hljs-comment">--逻辑名称</span><br> filename       <span class="hljs-comment">--物理存放位置及物理文件名称</span><br> size<span class="hljs-operator">=</span>        <span class="hljs-comment">--设置事务日志文件初始大小</span><br> maxsize        <span class="hljs-comment">--设置最大限制为</span><br> filegrowth       <span class="hljs-comment">--设置事务日志增长幅度</span><br>)<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-17-10.png" alt="创建表" class="lazyload"></p>
<p><strong>top子句</strong><br>top子句用于规定要返回的记录数目。对于拥有数千条记录的大型表来说top子句是很有用的。注意并非所有的数据库都支持top子句。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"># <span class="hljs-keyword">SQL</span> Server 的语法<br> <br><span class="hljs-keyword">SELECT</span> TOP number<span class="hljs-operator">|</span><span class="hljs-keyword">percent</span> column_name(s) <span class="hljs-keyword">FROM</span> table_name<br>  <br># MySQL 语法<br> <br><span class="hljs-keyword">SELECT</span> column_name(s) <span class="hljs-keyword">FROM</span> table_name LIMIT number<br> <br># Oracle 语法<br> <br><span class="hljs-keyword">SELECT</span> column_name(s) <span class="hljs-keyword">FROM</span> table_name <span class="hljs-keyword">WHERE</span> ROWNUM <span class="hljs-operator">&lt;=</span> number<br><br></code></pre></td></tr></table></figure>

<p><strong>limit数据分页</strong><br>limit用于限定返回记录数</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">limit n #提取n条数据<br>limit m,n #跳过m条数据，提取n条数据<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-44-05.png" alt="limit限定" class="lazyload"><br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-15-44-54.png" alt="limit" class="lazyload"></p>
<p><strong>like操作符</strong><br>like操作符用在where子句中搜索列表中的指定模式。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> 字段名 <span class="hljs-keyword">like</span> <span class="hljs-keyword">pattern</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> message <span class="hljs-keyword">where</span> content <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%g&#x27;</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> message <span class="hljs-keyword">where</span> content <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;g%&#x27;</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> message <span class="hljs-keyword">where</span> content <span class="hljs-keyword">not</span> <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%g%&#x27;</span><br># <span class="hljs-keyword">not</span> 关键字 不包含<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> 字段名 <span class="hljs-keyword">not</span> <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%g%&#x27;</span><br></code></pre></td></tr></table></figure>

<p>%可以用来定义通配符(模式中缺少的字母)<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-07-09.png" alt="like关键字查询" class="lazyload"></p>
<p><strong>通配符</strong><br>在搜索数据库中的数据时，sql通配符可以代替一个或多个字符。sql通配符必须和like运算符一起使用。[]通配符需要使用regexp关键字<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-08-47.png" alt="通配符" class="lazyload"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">#使用_通配符 仅代替一个字符<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> message <span class="hljs-keyword">where</span> content <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;_g&#x27;</span><br>#使用[charlist]通配符 字符列中的任何单一字符<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> message <span class="hljs-keyword">where</span> content regexp <span class="hljs-string">&#x27;[ds]%&#x27;</span> <span class="hljs-comment">--包含</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> message <span class="hljs-keyword">where</span> content regexp <span class="hljs-string">&#x27;[!g]%&#x27;</span> <span class="hljs-comment">--不包含</span><br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-28-04.png" alt="通配符" class="lazyload"></p>
<p><strong>IN操作符</strong><br>in操作符允许我们在where子句中规定多个值</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> 字段名 <span class="hljs-keyword">in</span> (value1,value2,...)<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-32-06.png" alt="测试in操作符" class="lazyload"></p>
<p><strong>not in 与 null 之间的关系</strong><br>A not in B的原理是拿A表值与B表值做是否不等的比较, 也就是a != b. 在sql中, null是缺失未知值而不是空值<br>当你判断任意值a != null时, 官方说, “You cannot use arithmetic comparison operators such as =, &lt;, or &lt;&gt; to test for NULL”, 任何与null值的对比都将返回null. 因此返回结果为否,这点可以用代码 select if(1 = null, ‘true’, ‘false’)证实.<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-37-07.png" alt="测试" class="lazyload"></p>
<p><strong>BETWEEN操作符</strong><br>操作符between…and会选取介于两个值之间的数据范围，这些值可以是数值、文本或者日期</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> 字段名 <span class="hljs-keyword">between</span> value1 <span class="hljs-keyword">and</span> value2 <br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-43-31.png" alt="between  and " class="lazyload"></p>
<p><em>注意：</em>不同的数据库对这个操作符的处理方式是有差异的。所以使用时要检查数据库如何处理操作符（左闭右开or全开or左开右闭or全闭）</p>
<p><strong>alias（别名）</strong><br>通过使用alias可以为列名和表名指定别名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">表的alias语法<br><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">as</span> 别名<br>列的alias语法<br><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">as</span> 别名 <span class="hljs-keyword">from</span> 表名<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-18-51-34.png" alt="别名" class="lazyload"></p>
<p><strong>JOIN</strong><br>join用于根据两个或多个表中间的列的关系从这些表中查询数据如果表中至少一个匹配则返回行<br><strong>inner join内连接</strong><br>在表中存在至少一个匹配时，则返回行。inner join 和join是相同的。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名<span class="hljs-number">1</span> <span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> 表名<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> 表名<span class="hljs-number">1.</span>字段名<span class="hljs-operator">=</span>表名<span class="hljs-number">2.</span>字段名<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-20-53-52.png" alt="join" class="lazyload"></p>
<p><strong>left join/left outer join左连接</strong><br>即使右表中没有匹配也从左表返回所有的行</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名<span class="hljs-number">1</span> <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> 表名<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> 表名<span class="hljs-number">1.</span>字段名<span class="hljs-operator">=</span>表名<span class="hljs-number">2.</span>字段名<br></code></pre></td></tr></table></figure>

<p><strong>right join / right outer join右连接</strong><br>即使左表中没有匹配，也从右表返回所有行</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名<span class="hljs-number">1</span> <span class="hljs-keyword">right</span> <span class="hljs-keyword">join</span> 表名<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> 表名<span class="hljs-number">1.</span>字段名<span class="hljs-operator">=</span>表名<span class="hljs-number">2.</span>字段名<br></code></pre></td></tr></table></figure>

<p><strong>full join/full outer join全连接</strong><br>只要其中一个表存在匹配就返回行</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名<span class="hljs-number">1</span> <span class="hljs-keyword">full</span> <span class="hljs-keyword">join</span> 表名<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> 表名<span class="hljs-number">1.</span>字段名<span class="hljs-operator">=</span>表名<span class="hljs-number">2.</span>字段名<br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-21-10-23.png" alt="join" class="lazyload"></p>
<p><strong>union操作符</strong><br>union操作符用于<em>合并</em>两个或多个select语句的结果集。union内部的select语句<em>必须拥有相同数量的列</em>。列也必须<em>拥有相似的数据类型</em>。同时每一条select语句中的列的<em>顺序必须相同</em>。union操作符<em>默认选取不同</em>的值。如果<em>允许重复</em>的值，请使用<em>union all</em>。<br>union结果集中的列名总是等于union中第一个select语句中的列名。<br>行专列用groupby+sumif列转行用unionn all</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">union</span>语法 <span class="hljs-comment">--union命令只会选取不同的值</span><br><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名<span class="hljs-number">1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名<span class="hljs-number">2</span><br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span>语法<br><span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名<span class="hljs-number">1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">select</span> 字段名 <span class="hljs-keyword">from</span> 表名<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-20-34-55.png" alt="union" class="lazyload"></p>
<h2 id="数据库的一些函数"><a href="#数据库的一些函数" class="headerlink" title="数据库的一些函数"></a>数据库的一些函数</h2><figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">一、数学函数<br><span class="hljs-built_in">abs</span>(x) 返回x的绝对值<br>bin(x) 返回x的二进制（oct返回八进制，hex返回十六进制）<br><span class="hljs-built_in">ceiling</span>(x) 返回大于x的最小整数值<br><span class="hljs-built_in">exp</span>(x) 返回值e（自然对数的底）的x次方<br><span class="hljs-built_in">floor</span>(x) 返回小于x的最大整数值<br>greatest(x1,x2,...,xn)返回集合中最大的值<br>least(x1,x2,...,xn) 返回集合中最小的值<br><span class="hljs-built_in">ln</span>(x) 返回x的自然对数<br><span class="hljs-built_in">log</span>(x,y)返回x的以y为底的对数<br><span class="hljs-built_in">mod</span>(x,y) 返回x<span class="hljs-operator">/</span>y的模（余数）<br>pi()返回pi的值（圆周率）<br>rand()返回０到１内的随机值,可以通过提供一个参数(种子)使rand()随机数生成器生成一个指定的值。<br>round(x,y)返回参数x的四舍五入的有y位小数的值<br>sign(x) 返回代表数字x的符号的值<br><span class="hljs-built_in">sqrt</span>(x) 返回一个数的平方根<br><span class="hljs-keyword">truncate</span>(x,y) 返回数字x截短为y位小数的结果<br> <br>二、聚合函数(常用于<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span>从句的<span class="hljs-keyword">select</span>查询中)<br><span class="hljs-built_in">avg</span>(col)返回指定列的平均值<br><span class="hljs-built_in">count</span>(col)返回指定列中非<span class="hljs-keyword">null</span>值的个数<br><span class="hljs-built_in">min</span>(col)返回指定列的最小值<br><span class="hljs-built_in">max</span>(col)返回指定列的最大值<br><span class="hljs-built_in">sum</span>(col)返回指定列的所有值之和<br>group_concat(col) 返回由属于一组的列值连接组合而成的结果<br> <br>三、字符串函数<br>ascii(<span class="hljs-type">char</span>)返回字符的ascii码值<br>bit_length(str)返回字符串的比特长度<br>concat(s1,s2...,sn)将s1,s2...,sn连接成字符串<br>concat_ws(sep,s1,s2...,sn)将s1,s2...,sn连接成字符串，并用sep字符间隔<br><span class="hljs-keyword">insert</span>(str,x,y,instr) 将字符串str从第x位置开始，y个字符长的子串替换为字符串instr，返回结果<br>find_in_set(str,list)分析逗号分隔的list列表，如果发现str，返回str在list中的位置<br>lcase(str)或<span class="hljs-built_in">lower</span>(str) 返回将字符串str中所有字符改变为小写后的结果<br><span class="hljs-keyword">left</span>(str,x)返回字符串str中最左边的x个字符<br>length(s)返回字符串str中的字符数<br>ltrim(str) 从字符串str中切掉开头的空格<br><span class="hljs-built_in">position</span>(substr <span class="hljs-keyword">in</span> str) 返回子串substr在字符串str中第一次出现的位置<br>quote(str) 用反斜杠转义str中的单引号<br>repeat(str,srchstr,rplcstr)返回字符串str重复x次的结果<br>reverse(str) 返回颠倒字符串str的结果<br><span class="hljs-keyword">right</span>(str,x) 返回字符串str中最右边的x个字符<br>rtrim(str) 返回字符串str尾部的空格<br>strcmp(s1,s2)比较字符串s1和s2<br><span class="hljs-built_in">trim</span>(str)去除字符串首部和尾部的所有空格<br>ucase(str)或<span class="hljs-built_in">upper</span>(str) 返回将字符串str中所有字符转变为大写后的结果<br> <br>四、日期和时间函数<br>curdate()或<span class="hljs-built_in">current_date</span>() 返回当前的日期<br>curtime()或<span class="hljs-built_in">current_time</span>() 返回当前的时间<br>date_add(<span class="hljs-type">date</span>,<span class="hljs-type">interval</span> <span class="hljs-type">int</span> keyword)返回日期<span class="hljs-type">date</span>加上间隔时间<span class="hljs-type">int</span>的结果(<span class="hljs-type">int</span>必须按照关键字进行格式化),如：selectdate_add(<span class="hljs-built_in">current_date</span>,<span class="hljs-type">interval</span> <span class="hljs-number">6</span> <span class="hljs-keyword">month</span>);<br>date_format(<span class="hljs-type">date</span>,fmt) 依照指定的fmt格式格式化日期<span class="hljs-type">date</span>值<br>date_sub(<span class="hljs-type">date</span>,<span class="hljs-type">interval</span> <span class="hljs-type">int</span> keyword)返回日期<span class="hljs-type">date</span>加上间隔时间<span class="hljs-type">int</span>的结果(<span class="hljs-type">int</span>必须按照关键字进行格式化),如：selectdate_sub(<span class="hljs-built_in">current_date</span>,<span class="hljs-type">interval</span> <span class="hljs-number">6</span> <span class="hljs-keyword">month</span>);<br>dayofweek(<span class="hljs-type">date</span>) 返回<span class="hljs-type">date</span>所代表的一星期中的第几天(<span class="hljs-number">1</span><span class="hljs-operator">~</span><span class="hljs-number">7</span>)<br>dayofmonth(<span class="hljs-type">date</span>) 返回<span class="hljs-type">date</span>是一个月的第几天(<span class="hljs-number">1</span><span class="hljs-operator">~</span><span class="hljs-number">31</span>)<br>dayofyear(<span class="hljs-type">date</span>) 返回<span class="hljs-type">date</span>是一年的第几天(<span class="hljs-number">1</span><span class="hljs-operator">~</span><span class="hljs-number">366</span>)<br>dayname(<span class="hljs-type">date</span>) 返回<span class="hljs-type">date</span>的星期名，如：<span class="hljs-keyword">select</span> dayname(<span class="hljs-built_in">current_date</span>);<br>from_unixtime(ts,fmt) 根据指定的fmt格式，格式化unix时间戳ts<br><span class="hljs-keyword">hour</span>(<span class="hljs-type">time</span>) 返回<span class="hljs-type">time</span>的小时值(<span class="hljs-number">0</span><span class="hljs-operator">~</span><span class="hljs-number">23</span>)<br><span class="hljs-keyword">minute</span>(<span class="hljs-type">time</span>) 返回<span class="hljs-type">time</span>的分钟值(<span class="hljs-number">0</span><span class="hljs-operator">~</span><span class="hljs-number">59</span>)<br><span class="hljs-keyword">month</span>(<span class="hljs-type">date</span>) 返回<span class="hljs-type">date</span>的月份值(<span class="hljs-number">1</span><span class="hljs-operator">~</span><span class="hljs-number">12</span>)<br>monthname(<span class="hljs-type">date</span>) 返回<span class="hljs-type">date</span>的月份名，如：<span class="hljs-keyword">select</span> monthname(<span class="hljs-built_in">current_date</span>);<br>now() 返回当前的日期和时间<br>quarter(<span class="hljs-type">date</span>) 返回<span class="hljs-type">date</span>在一年中的季度(<span class="hljs-number">1</span><span class="hljs-operator">~</span><span class="hljs-number">4</span>)，如<span class="hljs-keyword">select</span> quarter(<span class="hljs-built_in">current_date</span>);<br>week(<span class="hljs-type">date</span>) 返回日期<span class="hljs-type">date</span>为一年中第几周(<span class="hljs-number">0</span><span class="hljs-operator">~</span><span class="hljs-number">53</span>)<br><span class="hljs-keyword">year</span>(<span class="hljs-type">date</span>) 返回日期<span class="hljs-type">date</span>的年份(<span class="hljs-number">1000</span><span class="hljs-operator">~</span><span class="hljs-number">9999</span>)<br>一些示例：<br>获取当前系统时间：<span class="hljs-keyword">select</span> from_unixtime(unix_timestamp());<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">extract</span>(year_month <span class="hljs-keyword">from</span> <span class="hljs-built_in">current_date</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">extract</span>(day_second <span class="hljs-keyword">from</span> <span class="hljs-built_in">current_date</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">extract</span>(hour_minute <span class="hljs-keyword">from</span> <span class="hljs-built_in">current_date</span>);<br>返回两个日期值之间的差值(月数)：<span class="hljs-keyword">select</span> period_diff(<span class="hljs-number">200302</span>,<span class="hljs-number">199802</span>);<br>在mysql中计算年龄：<br><span class="hljs-keyword">select</span> date_format(from_days(to_days(now())<span class="hljs-operator">-</span>to_days(birthday)),<span class="hljs-string">&#x27;%y&#x27;</span>)<span class="hljs-operator">+</span><span class="hljs-number">0</span> <span class="hljs-keyword">as</span> age <span class="hljs-keyword">from</span> employee;<br>这样，如果brithday是未来的年月日的话，计算结果为<span class="hljs-number">0</span>。<br>下面的<span class="hljs-keyword">sql</span>语句计算员工的绝对年龄，即当birthday是未来的日期时，将得到负值。<br><span class="hljs-keyword">select</span> date_format(now(), <span class="hljs-string">&#x27;%y&#x27;</span>) <span class="hljs-operator">-</span> date_format(birthday, <span class="hljs-string">&#x27;%y&#x27;</span>) <span class="hljs-operator">-</span>(date_format(now(), <span class="hljs-string">&#x27;00-%m-%d&#x27;</span>) <span class="hljs-operator">&lt;</span>date_format(birthday, <span class="hljs-string">&#x27;00-%m-%d&#x27;</span>)) <span class="hljs-keyword">as</span> age <span class="hljs-keyword">from</span> employee<br> <br>五、加密函数<br>aes_encrypt(str,key) 返回用密钥key对字符串str利用高级加密标准算法加密后的结果，调用aes_encrypt的结果是一个二进制字符串，以<span class="hljs-type">blob</span>类型存储<br>aes_decrypt(str,key) 返回用密钥key对字符串str利用高级加密标准算法解密后的结果<br>decode(str,key) 使用key作为密钥解密加密字符串str<br>encrypt(str,salt) 使用unixcrypt()函数，用关键词salt(一个可以惟一确定口令的字符串，就像钥匙一样)加密字符串str<br>encode(str,key) 使用key作为密钥加密字符串str，调用encode()的结果是一个二进制字符串，它以<span class="hljs-type">blob</span>类型存储<br>md5() 计算字符串str的md5校验和<br>password(str) 返回字符串str的加密版本，这个加密过程是不可逆转的，和unix密码加密过程使用不同的算法。<br>sha() 计算字符串str的安全散列算法(sha)校验和<br>示例：<br><span class="hljs-keyword">select</span> encrypt(<span class="hljs-string">&#x27;root&#x27;</span>,<span class="hljs-string">&#x27;salt&#x27;</span>);<br><span class="hljs-keyword">select</span> encode(<span class="hljs-string">&#x27;xufeng&#x27;</span>,<span class="hljs-string">&#x27;key&#x27;</span>);<br><span class="hljs-keyword">select</span> decode(encode(<span class="hljs-string">&#x27;xufeng&#x27;</span>,<span class="hljs-string">&#x27;key&#x27;</span>),<span class="hljs-string">&#x27;key&#x27;</span>);#加解密放在一起<br><span class="hljs-keyword">select</span> aes_encrypt(<span class="hljs-string">&#x27;root&#x27;</span>,<span class="hljs-string">&#x27;key&#x27;</span>);<br><span class="hljs-keyword">select</span> aes_decrypt(aes_encrypt(<span class="hljs-string">&#x27;root&#x27;</span>,<span class="hljs-string">&#x27;key&#x27;</span>),<span class="hljs-string">&#x27;key&#x27;</span>);<br><span class="hljs-keyword">select</span> md5(<span class="hljs-string">&#x27;123456&#x27;</span>);<br><span class="hljs-keyword">select</span> sha(<span class="hljs-string">&#x27;123456&#x27;</span>);<br> <br>六、控制流函数<br>mysql有<span class="hljs-number">4</span>个函数是用来进行条件操作的，这些函数可以实现<span class="hljs-keyword">sql</span>的条件逻辑，允许开发者将一些应用程序业务逻辑转换到数据库后台。<br>mysql控制流函数：<br><span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span>[test1] <span class="hljs-keyword">then</span> [result1]...<span class="hljs-keyword">else</span> [<span class="hljs-keyword">default</span>] <span class="hljs-keyword">end</span>如果testn是真，则返回resultn，否则返回<span class="hljs-keyword">default</span><br><span class="hljs-keyword">case</span> [test] <span class="hljs-keyword">when</span>[val1] <span class="hljs-keyword">then</span> [<span class="hljs-keyword">result</span>]...<span class="hljs-keyword">else</span> [<span class="hljs-keyword">default</span>]<span class="hljs-keyword">end</span> 如果test和valn相等，则返回resultn，否则返回<span class="hljs-keyword">default</span><br>if(test,t,f) 如果test是真，返回t；否则返回f<br>ifnull(arg1,arg2) 如果arg1不是空，返回arg1，否则返回arg2<br><span class="hljs-built_in">nullif</span>(arg1,arg2) 如果arg1<span class="hljs-operator">=</span>arg2返回<span class="hljs-keyword">null</span>；否则返回arg1<br>这些函数的第一个是ifnull()，它有两个参数，并且对第一个参数进行判断。如果第一个参数不是<span class="hljs-keyword">null</span>，函数就会向调用者返回第一个参数；如果是<span class="hljs-keyword">null</span>,将返回第二个参数。<br>如：<span class="hljs-keyword">select</span> ifnull(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>), ifnull(<span class="hljs-keyword">null</span>,<span class="hljs-number">10</span>),ifnull(<span class="hljs-number">4</span><span class="hljs-operator">*</span><span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;false&#x27;</span>);<br><span class="hljs-built_in">nullif</span>()函数将会检验提供的两个参数是否相等，如果相等，则返回<span class="hljs-keyword">null</span>，如果不相等，就返回第一个参数。<br>如：<span class="hljs-keyword">select</span> <span class="hljs-built_in">nullif</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>),<span class="hljs-built_in">nullif</span>(<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>),<span class="hljs-built_in">nullif</span>(<span class="hljs-number">2</span><span class="hljs-operator">+</span><span class="hljs-number">3</span>,<span class="hljs-number">4</span><span class="hljs-operator">+</span><span class="hljs-number">1</span>);<br>和许多脚本语言提供的if()函数一样，mysql的if()函数也可以建立一个简单的条件测试，这个函数有三个参数，第一个是要被判断的表达式，如果表达式为真，if()将会返回第二个参数，如果为假，if()将会返回第三个参数。<br>如：selectif(<span class="hljs-number">1</span><span class="hljs-operator">&lt;</span><span class="hljs-number">10</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>),if(<span class="hljs-number">56</span><span class="hljs-operator">&gt;</span><span class="hljs-number">100</span>,<span class="hljs-string">&#x27;true&#x27;</span>,<span class="hljs-string">&#x27;false&#x27;</span>);<br>if()函数在只有两种可能结果时才适合使用。然而，在现实世界中，我们可能发现在条件测试中会需要多个分支。在这种情况下，mysql提供了<span class="hljs-keyword">case</span>函数，它和php及perl语言的switch<span class="hljs-operator">-</span><span class="hljs-keyword">case</span>条件例程一样。<br><span class="hljs-keyword">case</span>函数的格式有些复杂，通常如下所示：<br><span class="hljs-keyword">case</span> [expression <span class="hljs-keyword">to</span> be evaluated]<br><span class="hljs-keyword">when</span> [val <span class="hljs-number">1</span>] <span class="hljs-keyword">then</span> [<span class="hljs-keyword">result</span> <span class="hljs-number">1</span>]<br><span class="hljs-keyword">when</span> [val <span class="hljs-number">2</span>] <span class="hljs-keyword">then</span> [<span class="hljs-keyword">result</span> <span class="hljs-number">2</span>]<br><span class="hljs-keyword">when</span> [val <span class="hljs-number">3</span>] <span class="hljs-keyword">then</span> [<span class="hljs-keyword">result</span> <span class="hljs-number">3</span>]<br>......<br><span class="hljs-keyword">when</span> [val n] <span class="hljs-keyword">then</span> [<span class="hljs-keyword">result</span> n]<br><span class="hljs-keyword">else</span> [<span class="hljs-keyword">default</span> <span class="hljs-keyword">result</span>]<br><span class="hljs-keyword">end</span><br>这里，第一个参数是要被判断的值或表达式，接下来的是一系列的<span class="hljs-keyword">when</span><span class="hljs-operator">-</span><span class="hljs-keyword">then</span>块，每一块的第一个参数指定要比较的值，如果为真，就返回结果。所有的<span class="hljs-keyword">when</span><span class="hljs-operator">-</span><span class="hljs-keyword">then</span>块将以<span class="hljs-keyword">else</span>块结束，当<span class="hljs-keyword">end</span>结束了所有外部的<span class="hljs-keyword">case</span>块时，如果前面的每一个块都不匹配就会返回<span class="hljs-keyword">else</span>块指定的默认结果。如果没有指定<span class="hljs-keyword">else</span>块，而且所有的<span class="hljs-keyword">when</span><span class="hljs-operator">-</span><span class="hljs-keyword">then</span>比较都不是真，mysql将会返回<span class="hljs-keyword">null</span>。<br><span class="hljs-keyword">case</span>函数还有另外一种句法，有时使用起来非常方便，如下：<br><span class="hljs-keyword">case</span><br><span class="hljs-keyword">when</span> [conditional test <span class="hljs-number">1</span>] <span class="hljs-keyword">then</span> [<span class="hljs-keyword">result</span> <span class="hljs-number">1</span>]<br><span class="hljs-keyword">when</span> [conditional test <span class="hljs-number">2</span>] <span class="hljs-keyword">then</span> [<span class="hljs-keyword">result</span> <span class="hljs-number">2</span>]<br><span class="hljs-keyword">else</span> [<span class="hljs-keyword">default</span> <span class="hljs-keyword">result</span>]<br><span class="hljs-keyword">end</span><br>这种条件下，返回的结果取决于相应的条件测试是否为真。<br>示例：<br>mysql<span class="hljs-operator">&gt;</span><span class="hljs-keyword">select</span> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;green&#x27;</span><br><span class="hljs-keyword">when</span> <span class="hljs-string">&#x27;red&#x27;</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;stop&#x27;</span><br><span class="hljs-keyword">when</span> <span class="hljs-string">&#x27;green&#x27;</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;go&#x27;</span> <span class="hljs-keyword">end</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-keyword">case</span> <span class="hljs-number">9</span> <span class="hljs-keyword">when</span> <span class="hljs-number">1</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">when</span> <span class="hljs-number">2</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;n/a&#x27;</span> <span class="hljs-keyword">end</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span> (<span class="hljs-number">2</span><span class="hljs-operator">+</span><span class="hljs-number">2</span>)<span class="hljs-operator">=</span><span class="hljs-number">4</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;ok&#x27;</span> <span class="hljs-keyword">when</span>(<span class="hljs-number">2</span><span class="hljs-operator">+</span><span class="hljs-number">2</span>)<span class="hljs-operator">&lt;&gt;</span><span class="hljs-number">4</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;not ok&#x27;</span> <span class="hljs-keyword">end</span> asstatus;<br><span class="hljs-keyword">select</span> name,if((isactive <span class="hljs-operator">=</span> <span class="hljs-number">1</span>),<span class="hljs-string">&#x27;已激活&#x27;</span>,<span class="hljs-string">&#x27;未激活&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-keyword">result</span> fromuserlogininfo;<br><span class="hljs-keyword">select</span> fname,lname,(math<span class="hljs-operator">+</span>sci<span class="hljs-operator">+</span>lit) <span class="hljs-keyword">as</span> total,<br><span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span> (math<span class="hljs-operator">+</span>sci<span class="hljs-operator">+</span>lit) <span class="hljs-operator">&lt;</span> <span class="hljs-number">50</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;d&#x27;</span><br><span class="hljs-keyword">when</span> (math<span class="hljs-operator">+</span>sci<span class="hljs-operator">+</span>lit) <span class="hljs-keyword">between</span> <span class="hljs-number">50</span> <span class="hljs-keyword">and</span> <span class="hljs-number">150</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;c&#x27;</span><br><span class="hljs-keyword">when</span> (math<span class="hljs-operator">+</span>sci<span class="hljs-operator">+</span>lit) <span class="hljs-keyword">between</span> <span class="hljs-number">151</span> <span class="hljs-keyword">and</span> <span class="hljs-number">250</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;b&#x27;</span><br><span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">end</span><br><span class="hljs-keyword">as</span> grade <span class="hljs-keyword">from</span> marks;<br><span class="hljs-keyword">select</span> if(encrypt(<span class="hljs-string">&#x27;sue&#x27;</span>,<span class="hljs-string">&#x27;ts&#x27;</span>)<span class="hljs-operator">=</span>upass,<span class="hljs-string">&#x27;allow&#x27;</span>,<span class="hljs-string">&#x27;deny&#x27;</span>) <span class="hljs-keyword">as</span> loginresultfrom users <span class="hljs-keyword">where</span> uname <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;sue&#x27;</span>;#一个登陆验证<br> <br>七、格式化函数<br>date_format(<span class="hljs-type">date</span>,fmt) 依照字符串fmt格式化日期<span class="hljs-type">date</span>值<br>format(x,y) 把x格式化为以逗号隔开的数字序列，y是结果的小数位数<br>inet_aton(ip) 返回ip地址的数字表示<br>inet_ntoa(num) 返回数字所代表的ip地址<br>time_format(<span class="hljs-type">time</span>,fmt) 依照字符串fmt格式化时间<span class="hljs-type">time</span>值<br>其中最简单的是format()函数，它可以把大的数值格式化为以逗号间隔的易读的序列。<br>示例：<br><span class="hljs-keyword">select</span> format(<span class="hljs-number">34234.34323432</span>,<span class="hljs-number">3</span>);<br><span class="hljs-keyword">select</span> date_format(now(),<span class="hljs-string">&#x27;%w,%d %m %y %r&#x27;</span>);<br><span class="hljs-keyword">select</span> date_format(now(),<span class="hljs-string">&#x27;%y-%m-%d&#x27;</span>);<br><span class="hljs-keyword">select</span> date_format(<span class="hljs-number">19990330</span>,<span class="hljs-string">&#x27;%y-%m-%d&#x27;</span>);<br><span class="hljs-keyword">select</span> date_format(now(),<span class="hljs-string">&#x27;%h:%i %p&#x27;</span>);<br><span class="hljs-keyword">select</span> inet_aton(<span class="hljs-string">&#x27;10.122.89.47&#x27;</span>);<br><span class="hljs-keyword">select</span> inet_ntoa(<span class="hljs-number">175790383</span>);<br> <br>八、类型转化函数<br>为了进行数据类型转化，mysql提供了<span class="hljs-built_in">cast</span>()函数，它可以把一个值转化为指定的数据类型。类型有：<span class="hljs-type">binary</span>,<span class="hljs-type">char</span>,<span class="hljs-type">date</span>,<span class="hljs-type">time</span>,datetime,signed,unsigned<br>示例：<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">cast</span>(now() <span class="hljs-keyword">as</span> signed <span class="hljs-type">integer</span>),curdate()<span class="hljs-operator">+</span><span class="hljs-number">0</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-string">&#x27;f&#x27;</span><span class="hljs-operator">=</span><span class="hljs-type">binary</span> <span class="hljs-string">&#x27;f&#x27;</span>,<span class="hljs-string">&#x27;f&#x27;</span><span class="hljs-operator">=</span><span class="hljs-built_in">cast</span>(<span class="hljs-string">&#x27;f&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-type">binary</span>);<br> <br>九、系统信息函数<br>database() 返回当前数据库名<br>benchmark(count,expr) 将表达式expr重复运行count次<br>connection_id() 返回当前客户的连接id<br>found_rows() 返回最后一个<span class="hljs-keyword">select</span>查询进行检索的总行数<br><span class="hljs-keyword">user</span>()或<span class="hljs-built_in">system_user</span>() 返回当前登陆用户名<br>version() 返回mysql服务器的版本<br>示例：<br><span class="hljs-keyword">select</span> database(),version(),<span class="hljs-keyword">user</span>();<br>selectbenchmark(<span class="hljs-number">9999999</span>,<span class="hljs-built_in">log</span>(rand()<span class="hljs-operator">*</span>pi()));#该例中,mysql计算<span class="hljs-built_in">log</span>(rand()<span class="hljs-operator">*</span>pi())表达式<span class="hljs-number">9999999</span>次。<br></code></pre></td></tr></table></figure>

<p>进行尝试：<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-21-37-27.png" alt="函数执行" class="lazyload"></p>
<h2 id="数据库的数据类型"><a href="#数据库的数据类型" class="headerlink" title="数据库的数据类型"></a>数据库的数据类型</h2><p>mysql中主要类型：文本、数字、日期<br><img data-fancybox="gallery" data-sizes="auto" data-src="/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/2023-03-22-21-18-38.png" alt="数据类型" class="lazyload"></p>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul>
<li>sql对大小写不敏感。</li>
<li>分号是在数据系统中分隔每条sql语句的标准方法，这样就可以在对服务器的相同请求中执行一条以上的语句。</li>
<li>条件值周围使用的是单引号。sql使用单引号来环绕文本值（也接受双引号）。如果是数值，不要使用引号。</li>
</ul>

  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>本文作者：</strong>Jay jay<br>
        <strong>本文链接：</strong><a href="https://yyj-xx.github.io/2023/03/22/SQL%E5%AD%A6%E4%B9%A0/" title="https:&#x2F;&#x2F;yyj-xx.github.io&#x2F;2023&#x2F;03&#x2F;22&#x2F;SQL%E5%AD%A6%E4%B9%A0&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;yyj-xx.github.io&#x2F;2023&#x2F;03&#x2F;22&#x2F;SQL%E5%AD%A6%E4%B9%A0&#x2F;</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">学习</a>
    
</div>

  
      <div class="nexmoe-post-footer">
          <section class="nexmoe-comment">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.css">
<div id="gitalk"></div>
<script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '906d60a925bbfc786e36',
        clientSecret: 'eef34b48d710958974d793333753521d0474c243',
        id: window.location.pathname,
        repo: 'yyj-xx.github.io',
        owner: 'yyj-xx',
        admin: 'yyj-xx'
    })
    gitalk.render('gitalk')
</script>
</section>
      </div>
  
</div>
            <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.</span> <span class="toc-text">数据库的语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E4%BA%9B%E5%87%BD%E6%95%B0"><span class="toc-number">4.</span> <span class="toc-text">数据库的一些函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.</span> <span class="toc-text">数据库的数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">6.</span> <span class="toc-text">注意事项</span></a></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

 

<script async src="/js/app.js?v=1679977717721"></script>

<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>


    





</body>

</html>
